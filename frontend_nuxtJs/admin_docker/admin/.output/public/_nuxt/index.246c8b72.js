import{_ as c,o as r,c as m,a as e,j as l,d as w,k as f,v as y,r as u,n as v,b as C,t as D,l as V,w as j,F as $,i as z,g as h,q as k}from"./entry.faf62857.js";import{a as F,b as R}from"./main.a73236fa.js";const U={props:["el"],data(){return{height:"0"}},setup(){},methods:{height_refactor(){this.el.height=this.height}}},E=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Высота блока",-1),I={class:"mt-2 dropdown"};function S(n,t,o,g,d,s){return r(),m("div",{style:{"margin-left":"3px"},class:"dropdown",onClick:t[4]||(t[4]=l(()=>{},["stop"]))},[E,e("ul",{class:"dropdown-menu",onClick:t[3]||(t[3]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",I,[e("li",null,[e("p",{class:"dropdown-item",onClick:t[2]||(t[2]=l(i=>s.height_refactor(),["stop"]))},[w("Высота "),f(e("input",{onClick:t[0]||(t[0]=l(()=>{},["stop"])),"onUpdate:modelValue":t[1]||(t[1]=i=>d.height=i),type:"text",name:"",id:""},null,512),[[y,d.height]])])])])])])}const N=c(U,[["render",S]]),A={props:["el"],data(){return{width:"100",margin_bottom:"0"}},setup(){},methods:{margin_refactor(n){this.el.margin=n},width_refactor(n){this.el.width=this.width},margin_bottom_refactor(){this.el.margin_bottom=this.margin_bottom}}},L={style:{display:"flex"}},M=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Изменить ширину",-1),O={class:"mt-2 dropdown"},q=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Отступ",-1),G={class:"mt-2 dropdown"},H=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Отступ от объекта снизу",-1),P={class:"mt-2 dropdown"};function J(n,t,o,g,d,s){return r(),m("div",L,[e("div",{class:"dropdown",onClick:t[4]||(t[4]=l(()=>{},["stop"]))},[M,e("ul",{class:"dropdown-menu",onClick:t[3]||(t[3]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",O,[e("li",null,[e("p",{class:"dropdown-item",onClick:t[2]||(t[2]=l(i=>s.width_refactor(n.index),["stop"]))},[w("Ширина "),f(e("input",{onClick:t[0]||(t[0]=l(()=>{},["stop"])),"onUpdate:modelValue":t[1]||(t[1]=i=>d.width=i),type:"text",name:"",id:""},null,512),[[y,d.width]])])])])])]),e("div",{style:{"margin-left":"3px"},class:"dropdown",onClick:t[9]||(t[9]=l(()=>{},["stop"]))},[q,e("ul",{class:"dropdown-menu",onClick:t[8]||(t[8]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",G,[e("p",{class:"dropdown-item",onClick:t[5]||(t[5]=l(i=>s.margin_refactor("auto auto auto 0"),["stop"]))},"слева"),e("p",{class:"dropdown-item",onClick:t[6]||(t[6]=l(i=>s.margin_refactor("auto 0 auto auto"),["stop"]))},"справо"),e("p",{class:"dropdown-item",onClick:t[7]||(t[7]=l(i=>s.margin_refactor("auto"),["stop"]))},"центр")])])]),e("div",{style:{"margin-left":"3px"},class:"dropdown",onClick:t[14]||(t[14]=l(()=>{},["stop"]))},[H,e("ul",{class:"dropdown-menu",onClick:t[13]||(t[13]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",P,[e("li",null,[e("p",{class:"dropdown-item",onClick:t[12]||(t[12]=l(i=>s.margin_bottom_refactor(n.index),["stop"]))},[w("Отступ "),f(e("input",{onClick:t[10]||(t[10]=l(()=>{},["stop"])),"onUpdate:modelValue":t[11]||(t[11]=i=>d.margin_bottom=i),type:"text",name:"",id:""},null,512),[[y,d.margin_bottom]])])])])])])])}const B=c(A,[["render",J]]),K={props:["el","select_id_media"],components:{GeneralEdit:B,BlockEdit:N},setup(){},data(){return{img_src:""}},mounted(){console.log(213),setTimeout(()=>{let n=document.getElementById(this.el.id+"input");console.log(this.el.input_id),n.click()},1e3)},methods:{file_load(n){var t=n.target;if(!FileReader){alert("FileReader не поддерживается — облом");return}if(!t.files.length){alert("Ничего не загружено");return}var o=new FileReader;o.onload=()=>{this.el.img_src=o.result},o.readAsDataURL(t.files[0]),this.el.submit="true"}}},Q={class:"mt-2"},W=["id","src"],X=["id"],Y={style:{display:"flex",padding:"1%","padding-left":"0"}};function Z(n,t,o,g,d,s){const i=u("general-edit"),x=u("block-edit");return r(),m("div",Q,[e("div",{style:v([{width:"100%",height:o.el.height+"px",marginBottom:o.el.margin_bottom+"%"},{display:"flex"}])},[e("img",{style:v([{width:o.el.width+"%",margin:o.el.margin},{height:"100%"}]),id:o.el.id,src:o.el.img_src,alt:""},null,12,W)],4),e("input",{onChange:t[0]||(t[0]=b=>s.file_load(b)),id:o.el.id+"input",style:{display:"none"},type:"file",name:""},null,40,X),e("div",Y,[C(i,{el:o.el},null,8,["el"]),C(x,{style:{"margin-left":"3px"},el:o.el},null,8,["el"])])])}const tt=c(K,[["render",Z]]),et={props:["el","select_id_media"]},ot={class:"mt-2"},nt=["id","src"];function lt(n,t,o,g,d,s){return r(),m("div",ot,[e("div",{style:v([{width:"100%",height:o.el.height+"px",marginBottom:o.el.margin_bottom+"%"},{display:"flex"}])},[e("img",{class:"img_news",style:v([{width:o.el.width+"%",margin:o.el.margin},{height:"100%"}]),id:o.el.id,src:o.el.img_src,alt:""},null,12,nt)],4)])}const st=c(et,[["render",lt]]),it={el:"#text_prel",props:["el","index"]},dt={id:"text_prel",class:"mt-2"},rt=["align"];function at(n,t,o,g,d,s){return r(),m("div",dt,[e("p",{style:v({width:o.el.width+"%",margin:o.el.margin,marginBottom:o.el.margin_bottom+"%",fontSize:o.el.font_size+"px",color:o.el.color}),align:o.el.align},D(o.el.text),13,rt)])}const mt=c(it,[["render",at]]),pt={props:["el"],data(){return{font_size:"0"}},setup(){},methods:{align_refactor(n){this.el.align=n},font_size_refactor(){this.el.font_size=this.font_size},color_refactor(n){this.el.color=n.target.value}}},_t={style:{display:"flex"}},ut={id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},ct={class:"mt-2 dropdown"},gt=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Изменить размер шрифта",-1),bt={class:"mt-2 dropdown"},wt=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Изменить цвет",-1),ft={class:"mt-2 dropdown"},yt={class:"dropdown-item"};function vt(n,t,o,g,d,s){return r(),m("div",_t,[e("div",{class:"dropdown",onClick:t[4]||(t[4]=l(()=>{},["stop"]))},[e("button",ut,[V(n.$slots,"default")]),e("ul",{class:"dropdown-menu",onClick:t[3]||(t[3]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",ct,[e("p",{class:"dropdown-item",onClick:t[0]||(t[0]=l(i=>s.align_refactor("left"),["stop"]))},"Положение - слева"),e("p",{class:"dropdown-item",onClick:t[1]||(t[1]=l(i=>s.align_refactor("right"),["stop"]))},"Положение - справо"),e("p",{class:"dropdown-item",onClick:t[2]||(t[2]=l(i=>s.align_refactor("center"),["stop"]))},"Положение - центр")])])]),e("div",{class:"dropdown",onClick:t[9]||(t[9]=l(()=>{},["stop"]))},[gt,e("ul",{class:"dropdown-menu",onClick:t[8]||(t[8]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",bt,[e("li",null,[e("p",{class:"dropdown-item",onClick:t[7]||(t[7]=l(i=>s.font_size_refactor(),["stop"]))},[w("Шрифт "),f(e("input",{onClick:t[5]||(t[5]=l(()=>{},["stop"])),"onUpdate:modelValue":t[6]||(t[6]=i=>d.font_size=i),type:"text",name:"",id:""},null,512),[[y,d.font_size]])])])])])]),e("div",{class:"dropdown",onClick:t[12]||(t[12]=l(()=>{},["stop"]))},[wt,e("ul",{class:"dropdown-menu",onClick:t[11]||(t[11]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",ft,[e("li",null,[e("p",yt,[w("Цвет "),e("input",{onChange:t[10]||(t[10]=l(i=>s.color_refactor(i),["stop"])),type:"color",name:"",id:""},null,32)])])])])])])}const xt=c(pt,[["render",vt]]),ht={components:{TextEdit:xt,GeneralEdit:B},props:["el","index"],setup(){},methods:{text_area_sub(n){console.log(213),this.$emit("text_area_sub",n)}}},kt={class:"mt-2"},Ct={key:0,class:"mt-2"},Dt={style:{display:"flex"},class:"mt-2 w-100"},$t={key:1},zt=["align"],Bt={style:{display:"flex","flex-wrap":"wrap",padding:"1%","padding-left":"0"}};function Tt(n,t,o,g,d,s){const i=u("text-edit"),x=u("general-edit");return r(),m("div",kt,[o.el.submit=="none"?(r(),m("div",Ct,[f(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=b=>o.el.text=b),class:"form-control",id:"exampleFormControlTextarea1",rows:"3"},null,512),[[y,o.el.text]]),e("div",Dt,[e("button",{style:{margin:"auto"},onClick:t[1]||(t[1]=b=>s.text_area_sub(o.index)),class:"btn btn-primary"},"Подтвердить")])])):(r(),m("div",$t,[e("p",{style:v({width:o.el.width+"%",margin:o.el.margin,marginBottom:o.el.margin_bottom+"%",fontSize:o.el.font_size+"px",color:o.el.color}),align:o.el.align},D(o.el.text),13,zt),e("div",Bt,[C(i,{style:{"margin-left":"3px"},el:o.el},{default:j(()=>[w("Изменить текст")]),_:1},8,["el"]),C(x,{style:{"margin-left":"3px","margin-top":"2px"},el:o.el},null,8,["el"])])]))])}const Vt=c(ht,[["render",Tt]]);async function jt(n){try{var t=await F({url:`${R}api/v0.1/news/create`,method:"post",headers:{},data:n});return t}catch(o){return o.response}}const Ft={components:{TextArea:Vt,ImageObj:tt,TextAreaRel:mt,ImageRel:st},data(){return{header:"",textarea:"",elements:[{id:1,type:"textarea",submit:"none",text:"",width:"100",align:"left",margin:"0",margin_bottom:"0",height:"300"}],width:"100",default_obj:{id:null,type:"",submit:"none",text:"",width:"100",align:"0",margin:"0",margin_bottom:"0",height:"300",font_size:"16",color:"#000",img_src:""},count:1,pred_rel:!1,name:"",main_image:""}},setup(){},methods:{el_add(n,t){this.count++,console.log(this.count);let o=Object.assign({},this.default_obj);o.id=this.count,o.type=n,console.log(t),this.elements.splice(t+1,0,o)},el_sub(n){console.log(123,n),this.elements[n].submit="true"},el_remove(n){this.elements.splice(n,1)},get_pred_rel_elements(){return this.elements.slice().filter(t=>t.submit=="true")},get_main_title(){let n="";for(var t=0;t<this.elements.length;t++)if(this.elements[t].type=="textarea"){n=this.elements[t].text;break}return n},pred_rel_create(){console.log(213);let n=new FormData;n.append("main_image",this.main_image),n.append("context",document.getElementById("cart_body_rel").innerHTML),n.append("title",this.name),n.append("main_text",this.get_main_title()),jt(n)}}},Rt={class:"mt-5",style:{"padding-bottom":"10%"}},Ut={class:"card col-sm-6 m-auto mt-2"},Et={class:"card-header"},It={class:"form-group"},St={class:"card-body",id:"cart_body"},Nt=e("h5",{class:"card-title"},null,-1),At={key:2,style:{display:"flex"}},Lt=e("button",{style:{margin:"auto"},id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"}," Добавить ",-1),Mt={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Ot=["onClick"],qt=["onClick"],Gt=e("button",{style:{"margin-left":"3px"},id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"}," Добавить перед элементом ",-1),Ht={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Pt=["onClick"],Jt=["onClick"],Kt=["onClick"],Qt=e("button",{style:{margin:"auto"},id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"}," Добавить ",-1),Wt={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Xt={key:0,class:"card col-sm-6 m-auto mt-2"},Yt={class:"card-header"},Zt={class:"form-group"},te={style:{"font-size":"24px"}},ee={class:"card-body",id:"cart_body_rel"};function oe(n,t,o,g,d,s){const i=u("text-area"),x=u("image-obj"),b=u("text-area-rel"),T=u("image-rel");return r(),m("div",Rt,[e("div",Ut,[e("div",Et,[e("div",It,[f(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=a=>d.name=a),id:"exampleInputPassword1",placeholder:"Введите название"},null,512),[[y,d.name]])])]),e("div",St,[Nt,(r(!0),m($,null,z(d.elements,(a,p)=>(r(),m("div",{key:a.id,class:"form-group",id:"textarea_form"},[a.type=="textarea"?(r(),k(i,{key:0,onText_area_sub:t[1]||(t[1]=_=>s.el_sub(_)),el:a,index:p},null,8,["el","index"])):a.type=="image"?(r(),k(x,{key:1,el:a,index:p,select_id_media:n.select_id_media},null,8,["el","index","select_id_media"])):h("",!0),a.submit=="true"?(r(),m("div",At,[e("div",{class:"dropdown",onClick:t[2]||(t[2]=l(()=>{},["stop"]))},[Lt,e("ul",Mt,[e("li",null,[e("p",{class:"dropdown-item",onClick:_=>s.el_add("textarea",p)}," Большой текст ",8,Ot)]),e("li",null,[e("p",{class:"dropdown-item",onClick:_=>s.el_add("image",p)}," Картинка ",8,qt)])])]),e("div",{class:"dropdown",onClick:t[3]||(t[3]=l(()=>{},["stop"]))},[Gt,e("ul",Ht,[e("li",null,[e("p",{class:"dropdown-item",onClick:_=>s.el_add("textarea",p-1)}," Большой текст ",8,Pt)]),e("li",null,[e("p",{class:"dropdown-item",onClick:_=>s.el_add("image",p-1)}," Картинка ",8,Jt)])])]),e("button",{style:{"margin-left":"3px"},onClick:_=>s.el_remove(p),class:"btn btn-danger"}," Удалить ",8,Kt)])):h("",!0)]))),128)),e("div",{class:"mt-2 dropdown",onClick:t[6]||(t[6]=l(()=>{},["stop"]))},[Qt,e("ul",Wt,[e("li",null,[e("p",{class:"dropdown-item",onClick:t[4]||(t[4]=a=>s.el_add("textarea",d.elements.length-1))}," Большой текст ")]),e("li",null,[e("p",{class:"dropdown-item",onClick:t[5]||(t[5]=a=>s.el_add("image",d.elements.length-1))}," Картинка ")])])])]),e("button",{onClick:t[7]||(t[7]=a=>d.pred_rel=!d.pred_rel),href:"#",class:"btn mt-2 btn-primary"}," Предпросмотр ")]),d.pred_rel?(r(),m("div",Xt,[e("div",Yt,[e("div",Zt,[e("p",te,D(d.name),1)])]),e("div",ee,[(r(!0),m($,null,z(s.get_pred_rel_elements(),(a,p)=>(r(),m("div",{key:a.id,class:"form-group",id:"textarea_form"},[a.type=="textarea"?(r(),k(b,{key:0,onText_area_sub:t[8]||(t[8]=_=>s.el_sub(_)),el:a,index:p},null,8,["el","index"])):a.type=="image"?(r(),k(T,{key:1,el:a,index:p,select_id_media:n.select_id_media},null,8,["el","index","select_id_media"])):h("",!0)]))),128))]),e("button",{onClick:t[9]||(t[9]=a=>s.pred_rel_create()),href:"#",class:"btn mt-2 btn-primary"}," Подтвердить ")])):h("",!0)])}const se=c(Ft,[["render",oe]]);export{se as default};
