import{a as v,D as b}from"./main.d4fb522b.js";import{a as m}from"./index.681804e1.js";import{_ as h,o,c as d,F as $,r as w,a as i,t as c,d as k,g as x,h as D,p as I,f as S,i as y,b as f,j as _,k as L}from"./entry.f7888e23.js";async function B(e){try{var t=await m({url:`${v}api/v0.1/delivery/${e}`,method:"get",headers:{}});return t}catch(n){return n.response}}async function F(e){try{var t=await m({url:`${v}api/v0.1/delivery/${e}/submit/waiting`,method:"post",headers:{}});return t}catch(n){return n.response}}const N={el:"#orderProductList",setup(){},props:["orderList"]},C={id:"orderProductList"},V={class:"w-sto flex jus-sp"},j={class:"flex"},E={class:"img_order_product_div"},O=["src"],P={class:"info_order_product_div"},T={class:"name_order_product"};function A(e,t,n,a,s,l){return o(),d("div",C,[(o(!0),d($,null,w(n.orderList,(r,u)=>(o(),d("div",{key:r.id,class:"product_order_info"},[i("div",V,[i("p",null,c(u+1),1),k(),i("p",null,c(r.productItem.product.price*r.count)+" "+c(r.productItem.product.price_currency),1)]),i("div",j,[i("div",E,[i("img",{class:"img_order_product",src:e.$api_root+r.productItem.product.image,alt:""},null,8,O)]),i("div",P,[i("div",T,c(r.productItem.product.name)+" ["+c(r.productItem.weight.weight)+" гр]",1),i("p",null,c(r.productItem.product.price)+" "+c(r.productItem.product.price_currency),1),i("p",null,c(r.count)+" шт",1)])]),x(e.$slots,"default",{orderItem:r})]))),128))])}const M=h(N,[["render",A]]);async function W(e,t){console.log(t);try{var n=await m({url:`${v}api/v0.1/delivery/${e}/track_number`,method:"post",headers:{},data:t});return n}catch(a){return a.response}}const q={props:["delivery"],methods:{async submit(){let e=new FormData(document.getElementById("DeliveryInfoSubmitFrom")),t=await W(this.delivery.id,e);console.log(this.delivery),this.$emit("delivery_info_submit",t.data)}}},z=e=>(I("data-v-5457b8c8"),e=e(),S(),e),G={id:"DeliveryInfoSubmitFrom",action:"",method:"get"},H=z(()=>i("input",{type:"text",name:"track_number",value:"",placeholder:"Трек номер"},null,-1));function J(e,t,n,a,s,l){return o(),d("form",G,[H,i("button",{onClick:t[0]||(t[0]=D(r=>l.submit(),["prevent"])),style:{"margin-top":"2%"},class:"btn"},"Добавить данные доставки")])}const K=h(q,[["render",J],["__scopeId","data-v-5457b8c8"]]);const Q={components:{DeliveryInfo:b,OrderItemList:M,DeliveryInfoSubmit:K},data(){return{delivery:null}},async mounted(){let e=await B(this.$route.params.id);this.delivery=e.data,console.log(this.delivery)},methods:{async submit_waiting(){let e=await F(this.delivery.id);this.delivery=e.data},delivery_info_submit(e){this.delivery=e}}},R={class:"grid"},U={style:{height:"auto","min-height":"300px"},class:"flex"},X={key:0,class:"delivery_info auto"},Y={key:0,style:{"grid-column":"1 / -1","min-height":"300px","justify-content":"space-between"},class:"flex"},Z={style:{width:"46%",padding:"3%",background:"#fff"}},ee=i("p",{align:"center"},"Товары заказа",-1),te={style:{width:"46%",padding:"3%",background:"#fff"}},ie=i("button",{class:"btn"},"Отменить заказ",-1),re={key:2,class:"btn"};function se(e,t,n,a,s,l){const r=y("delivery-info"),u=y("order-item-list"),g=y("delivery-info-submit");return o(),d("section",R,[i("article",U,[s.delivery!=null?(o(),d("div",X,[f(r,{delivery:s.delivery},null,8,["delivery"])])):_("",!0)]),s.delivery!=null?(o(),d("div",Y,[i("div",Z,[ee,f(u,{orderList:s.delivery.order_delivery_transaction[0].product_list_transaction},null,8,["orderList"])]),i("div",te,[s.delivery.status=="На проверке"?(o(),d("button",{key:0,class:"btn",onClick:t[0]||(t[0]=(...p)=>l.submit_waiting&&l.submit_waiting(...p))},"Подтвердить заказ")):s.delivery.status=="Ожидание доставки"?(o(),L(g,{key:1,onDelivery_info_submit:t[1]||(t[1]=p=>l.delivery_info_submit(p)),delivery:s.delivery,style:{"margin-top":"2%"}},null,8,["delivery"])):_("",!0),ie,s.delivery.status=="Отправлен"?(o(),d("button",re,"Отследить заказ")):_("",!0)])])):_("",!0)])}const ce=h(Q,[["render",se]]);export{ce as default};
