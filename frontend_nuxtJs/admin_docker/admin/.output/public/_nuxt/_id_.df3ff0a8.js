import{D as I}from"./DeliveryInfo.37ca7ee4.js";import{g as b,h as w,_ as S,r as y,c as u,a as e,b as c,i as h,k as d,v as r,F as v,l as f,o as a,d as O,t as D,n as g,p as L,f as B}from"./entry.66c47c99.js";import{O as N,a as j,P as z,g as F,s as M,i as P}from"./initDeliverySdek.b206ebeb.js";import{O as T}from"./OrderInfo.b76ac5b8.js";async function E(i){try{var o=await b({url:`${w}api/v0.1/orders/${i}`,method:"get",headers:{}});return o}catch(m){return m.response}}async function W(i){try{var o=await b({url:`${w}api/v0.1/delivery/${i}/submit/waiting`,method:"post",headers:{}});return o}catch(m){return m.response}}const q={components:{DeliveryInfo:I,OrderItemList:N,OrderInfo:T,OrderSettings:j,PaymentInfo:z},data(){return{order:null,dilevery_auto:!1,dilevery_info:null,openContent:null}},async mounted(){let i=await E(this.$route.params.id);this.order=i.data;let o=await F(this.order.delivery.id);this.dilevery_info=o.data},methods:{delivery_info_submit(i){this.order.delivery=i},async submit_order(){let i=await M(this.order.id);this.order=i.data},async submit_waiting(){console.log(123);let i=await W(this.order.delivery.id);this.order.delivery=i.data},order_status_closed(i){this.order=i},showContent(i){i.number==this.openContent?this.openContent=null:this.openContent=i.number},addpackages(){this.dilevery_info.packages.push({number:`Упаковка №${this.dilevery_info.packages.length+1}`,weight:0,length:0,width:0,height:0,items:[{name:"",ware_key:"5",payment:{value:0},cost:0,weight:0,amount:0}]})},additem(i){console.log(i),i.items.push({name:"",ware_key:"5",payment:{value:0},cost:0,weight:0,amount:0})},async deliveryInit(){(await P(this.order.delivery.id,this.dilevery_info)).status==200&&(alert("Запрос отправлен успешно"),location.reload())}}},s=i=>(L("data-v-ad6e3734"),i=i(),B(),i),A={class:"grid"},G={style:{height:"auto","min-height":"300px"},class:"flex"},H={key:0,style:{width:"40%"},class:"delivery_info auto flex jus-sp"},J={key:0,style:{"grid-column":"1 / -1","min-height":"300px","justify-content":"space-between"},class:"flex"},K={style:{width:"46%",padding:"3%",background:"#fff"}},Q=s(()=>e("p",{align:"center"},"Товары заказа",-1)),R={style:{width:"46%",padding:"3%",background:"#fff"}},X={style:{height:"auto","min-height":"300px",width:"100%","background-color":"#fff","margin-top":"30px",padding:"2% 3%"},class:"flex"},Y={key:1,style:{width:"100%",height:"100%"}},Z=s(()=>e("p",{align:"center"},"Инфо о доставке",-1)),$=s(()=>e("p",null,"Пункт доставки",-1)),ee=s(()=>e("p",{align:"center"},"Упаковки",-1)),te=s(()=>e("br",null,null,-1)),ne=["onClick"],oe=s(()=>e("svg",{viewBox:"-122.9 121.1 105.9 61.9"},[e("path",{d:"M-63.2 180.3l43.5-43.5c1.7-1.7 2.7-4 2.7-6.5s-1-4.8-2.7-6.5c-1.7-1.7-4-2.7-6.5-2.7s-4.8 1-6.5 2.7L-69.9 161l-37.2-37.2c-1.7-1.7-4-2.7-6.5-2.7s-4.8 1-6.5 2.6c-1.9 1.8-2.8 4.2-2.8 6.6 0 2.3.9 4.6 2.6 6.5 11.4 11.5 41 41.2 43 43.3l.2.2c3.6 3.6 10.3 3.6 13.9 0z"})],-1)),ie=[oe],le=s(()=>e("p",null,"Высота",-1)),se=["onUpdate:modelValue"],de=s(()=>e("p",null,"Длина",-1)),re=["onUpdate:modelValue"],_e=s(()=>e("p",null,"Вес",-1)),ue=["onUpdate:modelValue"],ae=s(()=>e("p",null,"Ширина",-1)),pe=["onUpdate:modelValue"],ye=s(()=>e("p",{align:"center"},"Товары",-1)),ce=s(()=>e("p",null,"Количество",-1)),me=["onUpdate:modelValue"],he=s(()=>e("p",null,"Цена",-1)),ve=["onUpdate:modelValue"],fe=s(()=>e("p",null,"Название",-1)),ge=["onUpdate:modelValue"],be=s(()=>e("p",null,"Оплата",-1)),we=["onUpdate:modelValue"],xe=s(()=>e("p",null,"Идентификатор товара",-1)),Ve=["onUpdate:modelValue"],Ue=s(()=>e("p",null,"Вес товара",-1)),Ce=["onUpdate:modelValue"],ke=s(()=>e("br",null,null,-1)),Ie=s(()=>e("hr",null,null,-1)),Se=s(()=>e("br",null,null,-1)),Oe=["onClick"],De=s(()=>e("p",null,"Получатель",-1)),Le=["onUpdate:modelValue"],Be=s(()=>e("p",null,"Отправитель",-1)),Ne=s(()=>e("p",null,"Место отгрузки",-1)),je=s(()=>e("p",null,"Тарифный код",-1)),ze=s(()=>e("p",null,"Тип",-1));function Fe(i,o,m,Me,n,p){const x=y("delivery-info"),V=y("order-info"),U=y("payment-info"),C=y("order-item-list"),k=y("order-settings");return a(),u("div",null,[e("section",A,[e("article",G,[n.order!=null?(a(),u("div",H,[c(x,{delivery:n.order.delivery},null,8,["delivery"]),c(V,{order:n.order},null,8,["order"]),c(U,{payment:n.order.payment},null,8,["payment"])])):h("",!0)]),n.order!=null?(a(),u("div",J,[e("div",K,[Q,c(C,{orderList:n.order.product_list_transaction},null,8,["orderList"])]),e("div",R,[c(k,{onDelivery_info_submit:p.delivery_info_submit,onSubmit_order:p.submit_order,onSubmit_waiting:p.submit_waiting,onOrder_status_closed:p.order_status_closed,delivery:n.order.delivery,order:n.order},null,8,["onDelivery_info_submit","onSubmit_order","onSubmit_waiting","onOrder_status_closed","delivery","order"])])])):h("",!0)]),e("div",X,[n.dilevery_auto?n.dilevery_info?(a(),u("div",Y,[Z,$,d(e("input",{disabled:"","onUpdate:modelValue":o[1]||(o[1]=t=>n.dilevery_info.delivery_point=t),type:"text",name:"",id:"",style:{"margin-top":"10px"}},null,512),[[r,n.dilevery_info.delivery_point]]),ee,(a(!0),u(v,null,f(n.dilevery_info.packages,t=>(a(),u("div",{key:t.number,style:{width:"100%"}},[te,e("div",{onClick:l=>p.showContent(t),class:"spoiler_title",align:"center"},[O(D(t.number)+" ",1),e("span",{class:g([{open:n.openContent==t.number},"spoiler_arrow"])},ie,2)],8,ne),e("div",{class:g([{open:n.openContent==t.number},"spoiler_content"])},[le,d(e("input",{"onUpdate:modelValue":l=>t.height=l,type:"text"},null,8,se),[[r,t.height]]),de,d(e("input",{"onUpdate:modelValue":l=>t.length=l,type:"text"},null,8,re),[[r,t.length]]),_e,d(e("input",{"onUpdate:modelValue":l=>t.weight=l,type:"text"},null,8,ue),[[r,t.weight]]),ae,d(e("input",{"onUpdate:modelValue":l=>t.width=l,type:"text"},null,8,pe),[[r,t.width]]),ye,(a(!0),u(v,null,f(t.items,l=>(a(),u("div",{style:{width:"100%"},key:l.ware_key},[ce,d(e("input",{disabled:"","onUpdate:modelValue":_=>l.amount=_,type:"text"},null,8,me),[[r,l.amount]]),he,d(e("input",{disabled:"","onUpdate:modelValue":_=>l.cost=_,type:"text"},null,8,ve),[[r,l.cost]]),fe,d(e("input",{disabled:"","onUpdate:modelValue":_=>l.name=_,type:"text"},null,8,ge),[[r,l.name]]),be,d(e("input",{disabled:"","onUpdate:modelValue":_=>l.payment.value=_,type:"text"},null,8,we),[[r,l.payment.value]]),xe,d(e("input",{disabled:"","onUpdate:modelValue":_=>l.ware_key=_,type:"text"},null,8,Ve),[[r,l.ware_key]]),Ue,d(e("input",{disabled:"","onUpdate:modelValue":_=>l.weight=_,type:"text"},null,8,Ce),[[r,l.weight]]),ke,Ie,Se]))),128)),e("button",{disabled:"",onClick:l=>p.additem(t),class:"btn"},"Добавить товар",8,Oe)],2)]))),128)),e("button",{disabled:"",onClick:o[2]||(o[2]=t=>p.addpackages()),class:"btn"},"Добавить упаковку"),De,d(e("input",{disabled:"","onUpdate:modelValue":o[3]||(o[3]=t=>n.dilevery_info.recipient.name=t),type:"text"},null,512),[[r,n.dilevery_info.recipient.name]]),(a(!0),u(v,null,f(n.dilevery_info.recipient.phones,t=>d((a(),u("input",{disabled:"",key:t.number,"onUpdate:modelValue":l=>t.number=l,type:"text"},null,8,Le)),[[r,t.number]])),128)),Be,d(e("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>n.dilevery_info.sender.company=t),type:"text"},null,512),[[r,n.dilevery_info.sender.company]]),d(e("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>n.dilevery_info.sender.name=t),type:"text"},null,512),[[r,n.dilevery_info.sender.name]]),Ne,d(e("input",{disabled:"","onUpdate:modelValue":o[6]||(o[6]=t=>n.dilevery_info.shipment_point=t),type:"text"},null,512),[[r,n.dilevery_info.shipment_point]]),je,d(e("input",{disabled:"","onUpdate:modelValue":o[7]||(o[7]=t=>n.dilevery_info.tariff_code=t),type:"text"},null,512),[[r,n.dilevery_info.tariff_code]]),ze,d(e("input",{disabled:"","onUpdate:modelValue":o[8]||(o[8]=t=>n.dilevery_info.type=t),type:"text"},null,512),[[r,n.dilevery_info.type]]),e("button",{onClick:o[9]||(o[9]=t=>p.deliveryInit()),style:{"background-color":"green"},class:"btn"},"Оформить доставку")])):h("",!0):(a(),u("button",{key:0,class:"btn",onClick:o[0]||(o[0]=t=>n.dilevery_auto=!n.dilevery_auto)}," Автозаполенение "))])])}const qe=S(q,[["render",Fe],["__scopeId","data-v-ad6e3734"]]);export{qe as default};
