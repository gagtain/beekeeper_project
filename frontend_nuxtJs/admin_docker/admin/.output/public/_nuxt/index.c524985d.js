import{_ as g,o as r,c as m,a as e,h as l,d as w,m as f,v,i as u,n as y,b as C,t as D,g as V,w as j,F as $,r as z,j as h,k}from"./entry.f7888e23.js";import{a as F}from"./index.681804e1.js";const R={props:["el"],data(){return{height:"0"}},setup(){},methods:{height_refactor(){this.el.height=this.height}}},U=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Высота блока",-1),E={class:"mt-2 dropdown"};function I(n,t,o,c,d,s){return r(),m("div",{style:{"margin-left":"3px"},class:"dropdown",onClick:t[4]||(t[4]=l(()=>{},["stop"]))},[U,e("ul",{class:"dropdown-menu",onClick:t[3]||(t[3]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",E,[e("li",null,[e("p",{class:"dropdown-item",onClick:t[2]||(t[2]=l(i=>s.height_refactor(),["stop"]))},[w("Высота "),f(e("input",{onClick:t[0]||(t[0]=l(()=>{},["stop"])),"onUpdate:modelValue":t[1]||(t[1]=i=>d.height=i),type:"text",name:"",id:""},null,512),[[v,d.height]])])])])])])}const S=g(R,[["render",I]]),N={props:["el"],data(){return{width:"100",margin_bottom:"0"}},setup(){},methods:{margin_refactor(n){this.el.margin=n},width_refactor(n){this.el.width=this.width},margin_bottom_refactor(){this.el.margin_bottom=this.margin_bottom}}},A={style:{display:"flex"}},L=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Изменить ширину",-1),M={class:"mt-2 dropdown"},O=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Отступ",-1),G={class:"mt-2 dropdown"},H=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Отступ от объекта снизу",-1),P={class:"mt-2 dropdown"};function q(n,t,o,c,d,s){return r(),m("div",A,[e("div",{class:"dropdown",onClick:t[4]||(t[4]=l(()=>{},["stop"]))},[L,e("ul",{class:"dropdown-menu",onClick:t[3]||(t[3]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",M,[e("li",null,[e("p",{class:"dropdown-item",onClick:t[2]||(t[2]=l(i=>s.width_refactor(n.index),["stop"]))},[w("Ширина "),f(e("input",{onClick:t[0]||(t[0]=l(()=>{},["stop"])),"onUpdate:modelValue":t[1]||(t[1]=i=>d.width=i),type:"text",name:"",id:""},null,512),[[v,d.width]])])])])])]),e("div",{style:{"margin-left":"3px"},class:"dropdown",onClick:t[9]||(t[9]=l(()=>{},["stop"]))},[O,e("ul",{class:"dropdown-menu",onClick:t[8]||(t[8]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",G,[e("p",{class:"dropdown-item",onClick:t[5]||(t[5]=l(i=>s.margin_refactor("auto auto auto 0"),["stop"]))},"слева"),e("p",{class:"dropdown-item",onClick:t[6]||(t[6]=l(i=>s.margin_refactor("auto 0 auto auto"),["stop"]))},"справо"),e("p",{class:"dropdown-item",onClick:t[7]||(t[7]=l(i=>s.margin_refactor("auto"),["stop"]))},"центр")])])]),e("div",{style:{"margin-left":"3px"},class:"dropdown",onClick:t[14]||(t[14]=l(()=>{},["stop"]))},[H,e("ul",{class:"dropdown-menu",onClick:t[13]||(t[13]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",P,[e("li",null,[e("p",{class:"dropdown-item",onClick:t[12]||(t[12]=l(i=>s.margin_bottom_refactor(n.index),["stop"]))},[w("Отступ "),f(e("input",{onClick:t[10]||(t[10]=l(()=>{},["stop"])),"onUpdate:modelValue":t[11]||(t[11]=i=>d.margin_bottom=i),type:"text",name:"",id:""},null,512),[[v,d.margin_bottom]])])])])])])])}const B=g(N,[["render",q]]),J={props:["el","select_id_media"],components:{GeneralEdit:B,BlockEdit:S},setup(){},data(){return{img_src:""}},mounted(){console.log(213),setTimeout(()=>{let n=document.getElementById(this.el.id+"input");console.log(this.el.input_id),n.click()},1e3)},methods:{file_load(n){var t=n.target;if(!FileReader){alert("FileReader не поддерживается — облом");return}if(!t.files.length){alert("Ничего не загружено");return}var o=new FileReader;o.onload=()=>{this.el.img_src=o.result},o.readAsDataURL(t.files[0]),this.el.submit="true"}}},K={class:"mt-2"},Q=["id","src"],W=["id"],X={style:{display:"flex",padding:"1%","padding-left":"0"}};function Y(n,t,o,c,d,s){const i=u("general-edit"),x=u("block-edit");return r(),m("div",K,[e("div",{style:y([{width:"100%",height:o.el.height+"px",marginBottom:o.el.margin_bottom+"%"},{display:"flex"}])},[e("img",{style:y([{width:o.el.width+"%",margin:o.el.margin},{height:"100%"}]),id:o.el.id,src:o.el.img_src,alt:""},null,12,Q)],4),e("input",{onChange:t[0]||(t[0]=b=>s.file_load(b)),id:o.el.id+"input",style:{display:"none"},type:"file",name:""},null,40,W),e("div",X,[C(i,{el:o.el},null,8,["el"]),C(x,{style:{"margin-left":"3px"},el:o.el},null,8,["el"])])])}const Z=g(J,[["render",Y]]),tt={props:["el","select_id_media"]},et={class:"mt-2"},ot=["id","src"];function nt(n,t,o,c,d,s){return r(),m("div",et,[e("div",{style:y([{width:"100%",height:o.el.height+"px",marginBottom:o.el.margin_bottom+"%"},{display:"flex"}])},[e("img",{class:"img_news",style:y([{width:o.el.width+"%",margin:o.el.margin},{height:"100%"}]),id:o.el.id,src:o.el.img_src,alt:""},null,12,ot)],4)])}const lt=g(tt,[["render",nt]]),st={el:"#text_prel",props:["el","index"]},it={id:"text_prel",class:"mt-2"},dt=["align"];function rt(n,t,o,c,d,s){return r(),m("div",it,[e("p",{style:y({width:o.el.width+"%",margin:o.el.margin,marginBottom:o.el.margin_bottom+"%",fontSize:o.el.font_size+"px",color:o.el.color}),align:o.el.align},D(o.el.text),13,dt)])}const at=g(st,[["render",rt]]),mt={props:["el"],data(){return{font_size:"0"}},setup(){},methods:{align_refactor(n){this.el.align=n},font_size_refactor(){this.el.font_size=this.font_size},color_refactor(n){this.el.color=n.target.value}}},pt={style:{display:"flex"}},_t={id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},ut={class:"mt-2 dropdown"},gt=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Изменить размер шрифта",-1),ct={class:"mt-2 dropdown"},bt=e("button",{id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"},"Изменить цвет",-1),wt={class:"mt-2 dropdown"},ft={class:"dropdown-item"};function vt(n,t,o,c,d,s){return r(),m("div",pt,[e("div",{class:"dropdown",onClick:t[4]||(t[4]=l(()=>{},["stop"]))},[e("button",_t,[V(n.$slots,"default")]),e("ul",{class:"dropdown-menu",onClick:t[3]||(t[3]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",ut,[e("p",{class:"dropdown-item",onClick:t[0]||(t[0]=l(i=>s.align_refactor("left"),["stop"]))},"Положение - слева"),e("p",{class:"dropdown-item",onClick:t[1]||(t[1]=l(i=>s.align_refactor("right"),["stop"]))},"Положение - справо"),e("p",{class:"dropdown-item",onClick:t[2]||(t[2]=l(i=>s.align_refactor("center"),["stop"]))},"Положение - центр")])])]),e("div",{class:"dropdown",onClick:t[9]||(t[9]=l(()=>{},["stop"]))},[gt,e("ul",{class:"dropdown-menu",onClick:t[8]||(t[8]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",ct,[e("li",null,[e("p",{class:"dropdown-item",onClick:t[7]||(t[7]=l(i=>s.font_size_refactor(),["stop"]))},[w("Шрифт "),f(e("input",{onClick:t[5]||(t[5]=l(()=>{},["stop"])),"onUpdate:modelValue":t[6]||(t[6]=i=>d.font_size=i),type:"text",name:"",id:""},null,512),[[v,d.font_size]])])])])])]),e("div",{class:"dropdown",onClick:t[12]||(t[12]=l(()=>{},["stop"]))},[bt,e("ul",{class:"dropdown-menu",onClick:t[11]||(t[11]=l(()=>{},["stop"])),"aria-labelledby":"navbarDropdown"},[e("div",wt,[e("li",null,[e("p",ft,[w("Цвет "),e("input",{onChange:t[10]||(t[10]=l(i=>s.color_refactor(i),["stop"])),type:"color",name:"",id:""},null,32)])])])])])])}const yt=g(mt,[["render",vt]]),xt={components:{TextEdit:yt,GeneralEdit:B},props:["el","index"],setup(){},methods:{text_area_sub(n){console.log(213),this.$emit("text_area_sub",n)}}},ht={class:"mt-2"},kt={key:0,class:"mt-2"},Ct={style:{display:"flex"},class:"mt-2 w-100"},Dt={key:1},$t=["align"],zt={style:{display:"flex","flex-wrap":"wrap",padding:"1%","padding-left":"0"}};function Bt(n,t,o,c,d,s){const i=u("text-edit"),x=u("general-edit");return r(),m("div",ht,[o.el.submit=="none"?(r(),m("div",kt,[f(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=b=>o.el.text=b),class:"form-control",id:"exampleFormControlTextarea1",rows:"3"},null,512),[[v,o.el.text]]),e("div",Ct,[e("button",{style:{margin:"auto"},onClick:t[1]||(t[1]=b=>s.text_area_sub(o.index)),class:"btn btn-primary"},"Подтвердить")])])):(r(),m("div",Dt,[e("p",{style:y({width:o.el.width+"%",margin:o.el.margin,marginBottom:o.el.margin_bottom+"%",fontSize:o.el.font_size+"px",color:o.el.color}),align:o.el.align},D(o.el.text),13,$t),e("div",zt,[C(i,{style:{"margin-left":"3px"},el:o.el},{default:j(()=>[w("Изменить текст")]),_:1},8,["el"]),C(x,{style:{"margin-left":"3px","margin-top":"2px"},el:o.el},null,8,["el"])])]))])}const Tt=g(xt,[["render",Bt]]),Vt={components:{TextArea:Tt,ImageObj:Z,TextAreaRel:at,ImageRel:lt},data(){return{header:"",textarea:"",elements:[{id:1,type:"textarea",submit:"none",text:"",width:"100",align:"left",margin:"0",margin_bottom:"0",height:"300"}],width:"100",default_obj:{id:null,type:"",submit:"none",text:"",width:"100",align:"0",margin:"0",margin_bottom:"0",height:"300",font_size:"16",color:"#000",img_src:""},count:1,pred_rel:!1,name:"",main_image:""}},setup(){},methods:{el_add(n,t){this.count++,console.log(this.count);let o=Object.assign({},this.default_obj);o.id=this.count,o.type=n,console.log(t),this.elements.splice(t+1,0,o)},el_sub(n){console.log(123,n),this.elements[n].submit="true"},el_remove(n){this.elements.splice(n,1)},get_pred_rel_elements(){return this.elements.slice().filter(t=>t.submit=="true")},get_main_title(){let n="";for(var t=0;t<this.elements.length;t++)if(this.elements[t].type=="textarea"){n=this.elements[t].text;break}return n},pred_rel_create(){console.log(213);let n=new FormData;n.append("main_image",this.main_image),n.append("context",document.getElementById("cart_body_rel").innerHTML),n.append("title",this.name),n.append("main_text",this.get_main_title()),F({url:"http://localhost:8000/api/v0.1/news/create",method:"post",headers:{"Content-Type":"multipart/form-data"},data:n})}}},jt={class:"mt-5",style:{"padding-bottom":"10%"}},Ft={class:"card col-sm-6 m-auto mt-2"},Rt={class:"card-header"},Ut={class:"form-group"},Et={class:"card-body",id:"cart_body"},It=e("h5",{class:"card-title"},null,-1),St={key:2,style:{display:"flex"}},Nt=e("button",{style:{margin:"auto"},id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"}," Добавить ",-1),At={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Lt=["onClick"],Mt=["onClick"],Ot=e("button",{style:{"margin-left":"3px"},id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"}," Добавить перед элементом ",-1),Gt={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Ht=["onClick"],Pt=["onClick"],qt=["onClick"],Jt=e("button",{style:{margin:"auto"},id:"navbarDropdown","data-bs-toggle":"dropdown",class:"btn btn-primary dropdown-toggle"}," Добавить ",-1),Kt={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Qt={key:0,class:"card col-sm-6 m-auto mt-2"},Wt={class:"card-header"},Xt={class:"form-group"},Yt={style:{"font-size":"24px"}},Zt={class:"card-body",id:"cart_body_rel"};function te(n,t,o,c,d,s){const i=u("text-area"),x=u("image-obj"),b=u("text-area-rel"),T=u("image-rel");return r(),m("div",jt,[e("div",Ft,[e("div",Rt,[e("div",Ut,[f(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=a=>d.name=a),id:"exampleInputPassword1",placeholder:"Введите название"},null,512),[[v,d.name]])])]),e("div",Et,[It,(r(!0),m($,null,z(d.elements,(a,p)=>(r(),m("div",{key:a.id,class:"form-group",id:"textarea_form"},[a.type=="textarea"?(r(),k(i,{key:0,onText_area_sub:t[1]||(t[1]=_=>s.el_sub(_)),el:a,index:p},null,8,["el","index"])):a.type=="image"?(r(),k(x,{key:1,el:a,index:p,select_id_media:n.select_id_media},null,8,["el","index","select_id_media"])):h("",!0),a.submit=="true"?(r(),m("div",St,[e("div",{class:"dropdown",onClick:t[2]||(t[2]=l(()=>{},["stop"]))},[Nt,e("ul",At,[e("li",null,[e("p",{class:"dropdown-item",onClick:_=>s.el_add("textarea",p)}," Большой текст ",8,Lt)]),e("li",null,[e("p",{class:"dropdown-item",onClick:_=>s.el_add("image",p)}," Картинка ",8,Mt)])])]),e("div",{class:"dropdown",onClick:t[3]||(t[3]=l(()=>{},["stop"]))},[Ot,e("ul",Gt,[e("li",null,[e("p",{class:"dropdown-item",onClick:_=>s.el_add("textarea",p-1)}," Большой текст ",8,Ht)]),e("li",null,[e("p",{class:"dropdown-item",onClick:_=>s.el_add("image",p-1)}," Картинка ",8,Pt)])])]),e("button",{style:{"margin-left":"3px"},onClick:_=>s.el_remove(p),class:"btn btn-danger"}," Удалить ",8,qt)])):h("",!0)]))),128)),e("div",{class:"mt-2 dropdown",onClick:t[6]||(t[6]=l(()=>{},["stop"]))},[Jt,e("ul",Kt,[e("li",null,[e("p",{class:"dropdown-item",onClick:t[4]||(t[4]=a=>s.el_add("textarea",d.elements.length-1))}," Большой текст ")]),e("li",null,[e("p",{class:"dropdown-item",onClick:t[5]||(t[5]=a=>s.el_add("image",d.elements.length-1))}," Картинка ")])])])]),e("button",{onClick:t[7]||(t[7]=a=>d.pred_rel=!d.pred_rel),href:"#",class:"btn mt-2 btn-primary"}," Предпросмотр ")]),d.pred_rel?(r(),m("div",Qt,[e("div",Wt,[e("div",Xt,[e("p",Yt,D(d.name),1)])]),e("div",Zt,[(r(!0),m($,null,z(s.get_pred_rel_elements(),(a,p)=>(r(),m("div",{key:a.id,class:"form-group",id:"textarea_form"},[a.type=="textarea"?(r(),k(b,{key:0,onText_area_sub:t[8]||(t[8]=_=>s.el_sub(_)),el:a,index:p},null,8,["el","index"])):a.type=="image"?(r(),k(T,{key:1,el:a,index:p,select_id_media:n.select_id_media},null,8,["el","index","select_id_media"])):h("",!0)]))),128))]),e("button",{onClick:t[9]||(t[9]=a=>s.pred_rel_create()),href:"#",class:"btn mt-2 btn-primary"}," Подтвердить ")])):h("",!0)])}const ne=g(Vt,[["render",te]]);export{ne as default};
