import{j as g,k as h,a as f,o as a,b as r,f as s,F as A,l as v,m as x,t as C,p as w,q as $,s as u,i as M,e as c,v as D,c as y,w as N,x as T}from"./entry.70bfecf0.js";import{C as b}from"./CatalogProduct.af8c2626.js";import{L as k}from"./LoadingComp.35163d63.js";import"./FavoriteComp.1b2594cd.js";const F=""+new URL("filter.b252e476.png",import.meta.url).href;async function q(t){try{var e=await g({url:`${h}api/v0.1/beekeeper_web_api/product?size=${t}`,method:"get",headers:{},withCredentials:!0});return e}catch(l){return l.response}}async function S(){try{var t=await g({url:`${h}api/v0.1/beekeeper_web_api/category`,method:"get",headers:{},withCredentials:!0});return t}catch(e){return e.response}}const G={el:"#filter",name:"FilterCatalog",data(){return{filter_catalog:[],filter_class_name:[],filter_packaging_name:[],cat_list:[],category_list:[]}},async mounted(){let t=await S();this.category_list=t.data},methods:{add(t,e){this.addClassActive(t.srcElement)?this.$store.ADD_CATALOG_PARAMS(e):this.$store.REMOVE_CATALOG_PARAMS(e)},addClassActive(t){return console.log(t),t.classList.contains("active")?(t.classList.remove("active"),!1):(t.classList.add("active"),!0)}},setup(){}},P=t=>(w("data-v-cfe92613"),t=t(),$(),t),E={id:"filter"},I=P(()=>s("p",{class:"filter-p small"},"Категория",-1)),B={class:"filter-ul"},U=["onClick"];function V(t,e,l,d,o,i){return a(),r("div",E,[I,s("ul",B,[(a(!0),r(A,null,v(o.category_list,(_,R)=>(a(),r("li",{onClick:x(O=>i.add(O,`category__name=${_.name}`),["stop"]),key:R,class:"filter-li normal-small"},C(_.name),9,U))),128))])])}const p=f(G,[["render",V],["__scopeId","data-v-cfe92613"]]);const j={el:"#sorted",name:"SortedCatalog",data(){return{sorted_list:[],sorteredAlf:!1,sorteredMonet:!1,sorteredNew:!1}},props:["catalog_list"],methods:{async sorteredAlfFunc(){this.$store.ADD_ORDER_BY_CATALOG_PARAMS("order_by=name",["order_by=price_min","order_by=pk"]),this.sorteredAlf=!this.sorteredAlf,this.sorteredMonet=!1,this.sorteredNew=!1},async sorteredMoneyFUnc(){this.$store.ADD_ORDER_BY_CATALOG_PARAMS("order_by=price_min",["order_by=name","order_by=pk"]),this.sorteredMonet=!this.sorteredMonet,this.sorteredAlf=!1,this.sorteredNew=!1},async sorteredNewFUnc(){this.$store.ADD_ORDER_BY_CATALOG_PARAMS("order_by=pk",["order_by=name","order_by=price_min"]),this.sorteredNew=!this.sorteredNew,this.sorteredMonet=!1,this.sorteredAlf=!1}},setup(){}},z={class:"sorted-product flex jus-sp",id:"sorted"};function J(t,e,l,d,o,i){return a(),r("div",z,[s("p",{onClick:e[0]||(e[0]=_=>i.sorteredAlfFunc()),class:u([o.sorteredAlf?"act_sorted-p":"","sorted-p small"])}," По имени ",2),s("p",{onClick:e[1]||(e[1]=_=>i.sorteredMoneyFUnc()),class:u([o.sorteredMonet?"act_sorted-p":"","sorted-p small"])}," По цене ",2),s("p",{onClick:e[2]||(e[2]=_=>i.sorteredNewFUnc()),class:u([o.sorteredNew?"act_sorted-p":"","sorted-p small"])}," Новое ",2)])}const L=f(j,[["render",J],["__scopeId","data-v-96beec27"]]);async function m(t){try{var e=await g({url:`${h}api/v0.1/beekeeper_web_api/product/search?${t}`,method:"get",headers:{},withCredentials:!0});return e}catch(l){return l.response}}const n=t=>(w("data-v-0112214e"),t=t(),$(),t),Y={id:"catalog"},H={class:"absolute flex w-sto h_sto",style:{"pointer-events":"none"}},K={id:"dialog",class:"absolute auto",style:{"pointer-events":"auto"}},Q=n(()=>s("button",{class:"btn w-sto btn-green",onclick:"window.dialog.close();"},"Показать",-1)),W=n(()=>s("button",{onclick:"window.dialog.close();","aria-label":"close",class:"x"}," ❌ ",-1)),X={class:"sot-ob"},Z={class:"wrapper-product w-sto flex"},tt={class:"interactiv auto back"},et={key:0,style:{"margin-left":"5%"},class:"small"},st={class:"flex w-sto product_div"},at={class:"block filter_div"},ot={class:"filter-product",id:"filter_desk"},rt={class:"product_osnov relative"},lt={class:"sorted_div flex jus-sp"},it=n(()=>s("div",{class:"mob_filter flex"},[s("img",{onclick:"window.dialog.showModal();",class:"open_filter_mob auto",src:F,alt:""})],-1)),_t={key:0,class:"w-sto product-list flex"},ct={key:2,style:{width:"50%",margin:"auto","margin-top":"10%"}},nt=n(()=>s("div",{style:{"text-align":"center"},class:"flex w-sto"},[s("p",{style:{"font-size":"28px"},class:"VAG auto"},"Товаров с выбранными параметрами нету :(")],-1)),dt={class:"select_size"},ut={el:"#catalog",name:"CatalogItem",components:{FilterCatalog:p,SortedCatalog:L,CatalogProduct:b,LoadingComp:k},data(){return{catalog_list:[],filter_teleport:!1,category_list:[],type_packaging:[],CATALOG_LIST_STATE:this.$store.getCatalog_list,filters:!1,catalog_loads:!1,data:this.$store.getCatalog_params}},async mounted(){this.$route.query.filter?this.$store.ADD_CATALOG_PARAMS(`name=${JSON.parse(this.$route.query.filter).name}`):this.getCatalog()},methods:{async clear_filter(){await this.$router.replace({query:null}),this.$store.CLEAR_CATALOG_PARAMS(),this.getCatalog(),this.data=this.$store.getCatalog_params},async restartCatalog(){var e;this.catalog_loads=!1;let t=null;(e=this.$route.query)!=null&&e.filter?(t=await m(`name=${JSON.parse(this.$route.query.filter).name}`),this.filters=!0):t=await q(50),console.log(t,342),this.catalog_list=t.data,this.catalog_list_sorted=this.catalog_list.slice(),this.$store.REFACTOR_CATALOG_LIST(this.catalog_list),this.catalog_loads=!0},async filterReg(){let t=await S();this.category_list=t.data},async getCatalog(){this.catalog_loads=!1;let t=await m(this.$store.getCatalog_params.join("&"));this.catalog_list=t.data,this.catalog_loads=!0}},watch:{"$route.query":async function(){this.$route.query.filter&&this.$store.ADD_CATALOG_PARAMS(`name=${JSON.parse(this.$route.query.filter).name}`)},data:{handler(t,e){console.log(213),this.getCatalog()},deep:!0}}},pt=Object.assign(ut,{setup(t){return M({title:"Пчелиная артель - Каталог"}),(e,l)=>{const d=T;return a(),r("div",Y,[s("div",H,[s("dialog",K,[c(p,{category_list:e.category_list,catalog_list:e.catalog_list,onUpdateClassFiler:e.filterClassReg},null,8,["category_list","catalog_list","onUpdateClassFiler"]),Q,W])]),s("div",X,[s("div",Z,[s("div",tt,[e.$route.query.filter?(a(),r("p",et,C(JSON.parse(e.$route.query.filter).name),1)):D("",!0),s("div",st,[s("div",at,[s("div",ot,[c(p,{category_list:e.category_list,catalog_list:e.catalog_list},null,8,["category_list","catalog_list"])])]),s("div",rt,[s("div",lt,[c(L,{catalog_list:e.catalog_list},null,8,["catalog_list"]),it]),e.catalog_list.length?(a(),r("div",_t,[(a(!0),r(A,null,v(e.catalog_list,o=>(a(),y(b,{key:o.id,pr:o},null,8,["pr"]))),128))])):e.catalog_loads?(a(),r("div",ct,[nt,s("div",dt,[c(d,{to:"/catalog"},{default:N(()=>[s("button",{onClick:l[0]||(l[0]=o=>e.clear_filter()),style:{background:"rgb(255, 188, 65)",cursor:"pointer",width:"100%",border:"medium none","border-radius":"6px","font-size":"26px",padding:"2%","margin-top":"1%"}}," Сбросить настройки ")]),_:1})])])):(a(),y(k,{key:1}))])])])])])])}}}),mt=f(pt,[["__scopeId","data-v-0112214e"]]);export{mt as default};
