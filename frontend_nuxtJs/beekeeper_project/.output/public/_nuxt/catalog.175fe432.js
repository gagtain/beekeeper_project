import{C as T}from"./CatalogProduct.05fd85d9.js";import{h as u,i as m,j as y,a as C,o as l,b as _,e as s,F as f,k as h,w as v,t as A,p as $,l as b,m as p,r as F,f as g,q as L,c as S}from"./entry.618846a4.js";import"./FavoriteComp.e6f21453.js";import"./removeFavorite.abbdcdac.js";async function I(t){try{var e=await u({url:`${m}api/v0.1/beekeeper_web_api/product?size=${t}`,method:"get",headers:{Authorization:`Bearer ${y("assess").value}`}});return e}catch(a){return a.response}}const M={el:"#filter",name:"FilterCatalog",data(){return{filter_catalog:[],filter_class_name:[],filter_packaging_name:[],cat_list:[]}},props:["catalog_list","category_list","type_packaging"],methods:{addClassFilter(t){var a;t=(a=t==null?void 0:t.srcElement)!=null&&a.children[0]?t.srcElement:t.target.parentNode,this.addClassActive(t);let e=this.filter_class_name.indexOf(t.children[0].innerHTML);e>=0?(this.filter_class_name.splice(e,1),console.log(this.filter_class_name),this.c()):(this.filter_class_name.push(t.children[0].innerHTML),this.c())},c(){let t=this.b(this.a());this.$store.REFACTOR_CATALOG_LIST(t)},a(){let t=this.catalog_list.slice();return this.filter_class_name.forEach(e=>{console.log(e),t=t.filter(a=>a.category.find(n=>n.name==e))}),t},addPackagingFilter(t){var a;t=(a=t==null?void 0:t.srcElement)!=null&&a.children[0]?t.srcElement:t.target.parentNode,this.addClassActive(t);let e=this.filter_packaging_name.indexOf(t.children[0].innerHTML);e>=0?(this.filter_packaging_name.splice(e,1),this.c()):(this.filter_packaging_name.push(t.children[0].innerHTML),this.c())},b(t){return this.filter_packaging_name.forEach(e=>{t=t.filter(a=>a.type_packaging.find(n=>n.name==e))}),t},addClassActive(t){console.log(t),t.classList.contains("active")?t.classList.remove("active"):t.classList.add("active")}},setup(){}},x=t=>($("data-v-e9888aa9"),t=t(),b(),t),E={id:"filter"},N=x(()=>s("p",{class:"filter-p small"},"Категория",-1)),O={class:"filter-ul"},R=x(()=>s("p",{class:"filter-p small"},"Тип упаковки",-1)),B={class:"filter-ul"};function G(t,e,a,n,o,i){return l(),_("div",E,[N,s("ul",O,[(l(!0),_(f,null,h(a.category_list,(r,d)=>(l(),_("li",{onClick:e[1]||(e[1]=c=>i.addClassFilter(c)),key:d,class:"filter-li"},[s("p",{onClick:e[0]||(e[0]=v(c=>i.addClassFilter(c),["stop"])),class:"normal-small"},A(r.name),1)]))),128))]),R,s("ul",B,[(l(!0),_(f,null,h(a.type_packaging,(r,d)=>(l(),_("li",{onClick:e[3]||(e[3]=c=>i.addPackagingFilter(c)),key:d,class:"filter-li"},[s("p",{onClick:e[2]||(e[2]=v(c=>i.addPackagingFilter(c),["stop"])),class:"normal-small"},A(r.name),1)]))),128))])])}const P=C(M,[["render",G],["__scopeId","data-v-e9888aa9"]]);const U={el:"#sorted",name:"SortedCatalog",data(){return{sorted_list:[],sorteredAlf:!1,sorteredMonet:!1,sorteredNew:!1}},methods:{props:["catalog_list"],sorteredAlfFunc(){let t=this.$store.getCatalog_list.sort((e,a)=>e.name.localeCompare(a.name));this.sorteredAlf=!this.sorteredAlf,this.sorteredMonet=!1,this.sorteredNew=!1,this.$store.REFACTOR_CATALOG_LIST(t)},sorteredMoneyFUnc(){let t=this.$store.getCatalog_list.sort((e,a)=>parseFloat(a.price)-parseFloat(e.price));this.sorteredMonet=!this.sorteredMonet,this.sorteredAlf=!1,this.sorteredNew=!1,this.$store.REFACTOR_CATALOG_LIST(t)},sorteredNewFUnc(){let t=this.$store.getCatalog_list.sort((e,a)=>parseFloat(a.id)-parseFloat(e.id));this.sorteredNew=!this.sorteredNew,this.sorteredMonet=!1,this.sorteredAlf=!1,this.$store.REFACTOR_CATALOG_LIST(t)}},setup(){}},z={class:"sorted-product flex jus-sp",id:"sorted"};function H(t,e,a,n,o,i){return l(),_("div",z,[s("p",{onClick:e[0]||(e[0]=r=>i.sorteredAlfFunc()),class:p([o.sorteredAlf?"act_sorted-p":"","sorted-p small"])}," По имени ",2),s("p",{onClick:e[1]||(e[1]=r=>i.sorteredMoneyFUnc()),class:p([o.sorteredMonet?"act_sorted-p":"","sorted-p small"])}," По цене ",2),s("p",{onClick:e[2]||(e[2]=r=>i.sorteredNewFUnc()),class:p([o.sorteredNew?"act_sorted-p":"","sorted-p small"])}," Новое ",2)])}const j=C(U,[["render",H],["__scopeId","data-v-444d5186"]]);async function V(){try{var t=await u({url:`${m}api/v0.1/beekeeper_web_api/category`,method:"get",headers:{Authorization:`Bearer ${y("assess").value}`}});return t}catch(e){return e.response}}async function q(){try{var t=await u({url:`${m}api/v0.1/beekeeper_web_api/type_packaging`,method:"get",headers:{Authorization:`Bearer ${y("assess").value}`}});return t}catch(e){return e.response}}const D={el:"#catalog",name:"CatalogItem",components:{FilterCatalog:P,SortedCatalog:j,CatalogProduct:T},data(){return{catalog_list:[{id:0,name:"",image:"",price:"",price_currency:"",description:"",category:[{name:""}],type_packaging:{name:""}}],filter_teleport:!1,category_list:[],type_packaging:[],CATALOG_LIST_STATE:this.$store.getCatalog_list}},async created(){let t=await I(50);this.filterReg(),this.catalog_list=t.data,this.catalog_list_sorted=this.catalog_list.slice(),this.$store.REFACTOR_CATALOG_LIST(this.catalog_list)},methods:{async filterReg(){let t=await V();this.category_list=t.data;let e=await q();this.type_packaging=e.data}},setup(){}},k=t=>($("data-v-4a6f77d9"),t=t(),b(),t),J={id:"catalog"},K={class:"absolute flex w-sto h_sto",style:{"pointer-events":"none"}},Q={id:"dialog",class:"absolute auto",style:{"pointer-events":"auto"}},W=k(()=>s("button",{class:"btn w-sto btn-green",onclick:"window.dialog.close();"},"Показать",-1)),X=k(()=>s("button",{onclick:"window.dialog.close();","aria-label":"close",class:"x"}," ❌ ",-1)),Y={class:"sot-ob"},Z={class:"wrapper-product w-sto flex"},tt={class:"interactiv auto back"},et={class:"flex w-sto product_div"},st={class:"block filter_div"},at={class:"filter-product",id:"filter_desk"},ot={class:"product_osnov"},lt={class:"sorted_div flex jus-sp"},it=k(()=>s("div",{class:"mob_filter relative"},[s("p",{onclick:"window.dialog.showModal();",class:"open_filter_mob"}," Фильтрация ")],-1)),rt={key:0,class:"w-sto product-list flex"};function ct(t,e,a,n,o,i){const r=F("FilterCatalog"),d=F("SortedCatalog"),c=T;return l(),_("div",J,[s("div",K,[s("dialog",Q,[g(r,{category_list:o.category_list,type_packaging:o.type_packaging,catalog_list:o.catalog_list,onUpdateClassFiler:t.filterClassReg},null,8,["category_list","type_packaging","catalog_list","onUpdateClassFiler"]),W,X])]),s("div",Y,[s("div",Z,[s("div",tt,[s("div",et,[s("div",st,[s("div",at,[g(r,{category_list:o.category_list,type_packaging:o.type_packaging,catalog_list:o.catalog_list},null,8,["category_list","type_packaging","catalog_list"])])]),s("div",ot,[s("div",lt,[g(d,{catalog_list:o.catalog_list},null,8,["catalog_list"]),it]),t.$store.getCatalog_list?(l(),_("div",rt,[(l(!0),_(f,null,h(t.$store.getCatalog_list,w=>(l(),S(c,{key:w.id,pr:w},null,8,["pr"]))),128))])):L("",!0)])])])])])])}const gt=C(D,[["render",ct],["__scopeId","data-v-4a6f77d9"]]);export{gt as default};
