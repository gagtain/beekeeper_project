import{i as g,j as h,k as y,a as f,o as a,e as r,f as s,F as v,r as C,w as x,t as $,p as w,l as b,m as u,b as D,h as c,q as N,c as m,s as T,v as F}from"./entry.ca48256d.js";import{C as k}from"./CatalogProduct.8acf6ade.js";import{L as S}from"./LoadingComp.37102fe2.js";import"./FavoriteComp.0bad9949.js";const q=""+new URL("filter.b252e476.png",import.meta.url).href;async function G(e){try{var t=await g({url:`${h}api/v0.1/beekeeper_web_api/product?size=${e}`,method:"get",headers:{},withCredentials:!0});return t}catch(l){return l.response}}async function L(){try{var e=await g({url:`${h}api/v0.1/beekeeper_web_api/category`,method:"get",headers:{Authorization:y("assess").value!=null?`Bearer ${y("assess").value}`:void 0}});return e}catch(t){return t.response}}const P={el:"#filter",name:"FilterCatalog",data(){return{filter_catalog:[],filter_class_name:[],filter_packaging_name:[],cat_list:[],category_list:[]}},async mounted(){let e=await L();this.category_list=e.data},methods:{add(e,t){this.addClassActive(e.srcElement)?this.$store.ADD_CATALOG_PARAMS(t):this.$store.REMOVE_CATALOG_PARAMS(t)},addClassActive(e){return console.log(e),e.classList.contains("active")?(e.classList.remove("active"),!1):(e.classList.add("active"),!0)}},setup(){}},E=e=>(w("data-v-cfe92613"),e=e(),b(),e),I={id:"filter"},B=E(()=>s("p",{class:"filter-p small"},"Категория",-1)),U={class:"filter-ul"},z=["onClick"];function V(e,t,l,d,o,i){return a(),r("div",I,[B,s("ul",U,[(a(!0),r(v,null,C(o.category_list,(_,O)=>(a(),r("li",{onClick:x(M=>i.add(M,`category__name=${_.name}`),["stop"]),key:O,class:"filter-li normal-small"},$(_.name),9,z))),128))])])}const p=f(P,[["render",V],["__scopeId","data-v-cfe92613"]]);const j={el:"#sorted",name:"SortedCatalog",data(){return{sorted_list:[],sorteredAlf:!1,sorteredMonet:!1,sorteredNew:!1}},props:["catalog_list"],methods:{async sorteredAlfFunc(){this.$store.ADD_ORDER_BY_CATALOG_PARAMS("order_by=name",["order_by=price_min","order_by=pk"]),this.sorteredAlf=!this.sorteredAlf,this.sorteredMonet=!1,this.sorteredNew=!1},async sorteredMoneyFUnc(){this.$store.ADD_ORDER_BY_CATALOG_PARAMS("order_by=price_min",["order_by=name","order_by=pk"]),this.sorteredMonet=!this.sorteredMonet,this.sorteredAlf=!1,this.sorteredNew=!1},async sorteredNewFUnc(){this.$store.ADD_ORDER_BY_CATALOG_PARAMS("order_by=pk",["order_by=name","order_by=price_min"]),this.sorteredNew=!this.sorteredNew,this.sorteredMonet=!1,this.sorteredAlf=!1}},setup(){}},J={class:"sorted-product flex jus-sp",id:"sorted"};function Y(e,t,l,d,o,i){return a(),r("div",J,[s("p",{onClick:t[0]||(t[0]=_=>i.sorteredAlfFunc()),class:u([o.sorteredAlf?"act_sorted-p":"","sorted-p small"])}," По имени ",2),s("p",{onClick:t[1]||(t[1]=_=>i.sorteredMoneyFUnc()),class:u([o.sorteredMonet?"act_sorted-p":"","sorted-p small"])}," По цене ",2),s("p",{onClick:t[2]||(t[2]=_=>i.sorteredNewFUnc()),class:u([o.sorteredNew?"act_sorted-p":"","sorted-p small"])}," Новое ",2)])}const R=f(j,[["render",Y],["__scopeId","data-v-96beec27"]]);async function A(e){try{var t=await g({url:`${h}api/v0.1/beekeeper_web_api/product/search?${e}`,method:"get",headers:{},withCredentials:!0});return t}catch(l){return l.response}}const n=e=>(w("data-v-0112214e"),e=e(),b(),e),H={id:"catalog"},K={class:"absolute flex w-sto h_sto",style:{"pointer-events":"none"}},Q={id:"dialog",class:"absolute auto",style:{"pointer-events":"auto"}},W=n(()=>s("button",{class:"btn w-sto btn-green",onclick:"window.dialog.close();"},"Показать",-1)),X=n(()=>s("button",{onclick:"window.dialog.close();","aria-label":"close",class:"x"}," ❌ ",-1)),Z={class:"sot-ob"},ee={class:"wrapper-product w-sto flex"},te={class:"interactiv auto back"},se={key:0,style:{"margin-left":"5%"},class:"small"},ae={class:"flex w-sto product_div"},oe={class:"block filter_div"},re={class:"filter-product",id:"filter_desk"},le={class:"product_osnov relative"},ie={class:"sorted_div flex jus-sp"},_e=n(()=>s("div",{class:"mob_filter flex"},[s("img",{onclick:"window.dialog.showModal();",class:"open_filter_mob auto",src:q,alt:""})],-1)),ce={key:0,class:"w-sto product-list flex"},ne={key:2,style:{width:"50%",margin:"auto","margin-top":"10%"}},de=n(()=>s("div",{style:{"text-align":"center"},class:"flex w-sto"},[s("p",{style:{"font-size":"28px"},class:"VAG auto"},"Товаров с выбранными параметрами нету :(")],-1)),ue={class:"select_size"},pe={el:"#catalog",name:"CatalogItem",components:{FilterCatalog:p,SortedCatalog:R,CatalogProduct:k,LoadingComp:S},data(){return{catalog_list:[],filter_teleport:!1,category_list:[],type_packaging:[],CATALOG_LIST_STATE:this.$store.getCatalog_list,filters:!1,catalog_loads:!1,data:this.$store.getCatalog_params}},async mounted(){this.$route.query.filter?this.$store.ADD_CATALOG_PARAMS(`name=${JSON.parse(this.$route.query.filter).name}`):this.getCatalog()},methods:{async clear_filter(){await this.$router.replace({query:null}),this.$store.CLEAR_CATALOG_PARAMS(),this.getCatalog(),this.data=this.$store.getCatalog_params},async restartCatalog(){var t;this.catalog_loads=!1;let e=null;(t=this.$route.query)!=null&&t.filter?(e=await A(`name=${JSON.parse(this.$route.query.filter).name}`),this.filters=!0):e=await G(50),console.log(e,342),this.catalog_list=e.data,this.catalog_list_sorted=this.catalog_list.slice(),this.$store.REFACTOR_CATALOG_LIST(this.catalog_list),this.catalog_loads=!0},async filterReg(){let e=await L();this.category_list=e.data},async getCatalog(){this.catalog_loads=!1;let e=await A(this.$store.getCatalog_params.join("&"));this.catalog_list=e.data,this.catalog_loads=!0}},watch:{"$route.query":async function(){this.$route.query.filter&&this.$store.ADD_CATALOG_PARAMS(`name=${JSON.parse(this.$route.query.filter).name}`)},data:{handler(e,t){console.log(213),this.getCatalog()},deep:!0}}},ge=Object.assign(pe,{setup(e){return D({title:"Пчелиная артель - Каталог"}),(t,l)=>{const d=F;return a(),r("div",H,[s("div",K,[s("dialog",Q,[c(p,{category_list:t.category_list,catalog_list:t.catalog_list,onUpdateClassFiler:t.filterClassReg},null,8,["category_list","catalog_list","onUpdateClassFiler"]),W,X])]),s("div",Z,[s("div",ee,[s("div",te,[t.$route.query.filter?(a(),r("p",se,$(JSON.parse(t.$route.query.filter).name),1)):N("",!0),s("div",ae,[s("div",oe,[s("div",re,[c(p,{category_list:t.category_list,catalog_list:t.catalog_list},null,8,["category_list","catalog_list"])])]),s("div",le,[s("div",ie,[c(R,{catalog_list:t.catalog_list},null,8,["catalog_list"]),_e]),t.catalog_list.length?(a(),r("div",ce,[(a(!0),r(v,null,C(t.catalog_list,o=>(a(),m(k,{key:o.id,pr:o},null,8,["pr"]))),128))])):t.catalog_loads?(a(),r("div",ne,[de,s("div",ue,[c(d,{to:"/catalog"},{default:T(()=>[s("button",{onClick:l[0]||(l[0]=o=>t.clear_filter()),style:{background:"rgb(255, 188, 65)",cursor:"pointer",width:"100%",border:"medium none","border-radius":"6px","font-size":"26px",padding:"2%","margin-top":"1%"}}," Сбросить настройки ")]),_:1})])])):(a(),m(S,{key:1}))])])])])])])}}}),Ae=f(ge,[["__scopeId","data-v-0112214e"]]);export{Ae as default};
