import{_ as q}from"./NIconButton.vue.ac7efd0c.js";import{_ as Q}from"./Navbar.vue.bd98686f.js";import{a as j,r as T,L as U,o,e as l,f as m,u as n,b as e,j as z,F as I,m as O,c as F,w as S,q as N,p as K,M as V,N as Y,O as ee,y as X,z as te,P as se,J as ne,h as W,l as y,Q as oe,R as ae,S as ie,t as x,T as G,U as le,V as re,W as ce,X as ue,Y as de,H as pe}from"./entry.a0dd6aac.js";import{_ as me}from"./NSectionBlock.9cbe0175.js";import{_ as fe}from"./FilepathItem.vue.3587ec1f.js";import{_ as _e}from"./CodeSnippets.vue.2f33c6d1.js";import{u as he,a as ve}from"./editor.aee50e2c.js";import{_ as ge}from"./DrawerRight.vue.aa1fd47b.js";import{D as xe}from"./constants.d7bcda3c.js";import"./NIconTitle.vue.ace3a05a.js";import"./NCodeBlock.vue.e44529a6.js";import"./client.d6464981.js";const we={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},be={for:"drop-zone-input","text-3xl":""},ye={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},$e=e("div",{px6:"",py6:""},[e("h1",{"text-2xl":""}," Upload "),e("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1),ke={grid:"~ cols-minmax-8rem","overflow-auto":"",p6:""},Ce={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Pe=["src"],Ae={flex:"~ gap1","items-center":""},Fe={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},De=j({__name:"DropZone",props:{folder:{type:String,required:!0}},emits:["uploaded"],setup($,{emit:t}){const p=$,i=T(!1),w=T(),u=T([]),b=["image","video"];function P(a){w.value=a.target,i.value=!0}function B(a){a.target===w.value&&(i.value=!1)}function E(a){a.preventDefault()}function L(a){a.preventDefault(),g(a.dataTransfer.files)}function g(a){const f=Array.from(a||[]);if(f.length){const _=[],r=u.value.map(c=>c.name);for(const c of f)if(r.includes(c.name)){let h=1;const[C,R]=c.name.split(".");for(;r.includes(`${C} (${h}).${R}`);)h++;const M=`${C}-${h}.${R}`,H=new Blob([c],{type:c.type}),J=new File([H],M,{lastModified:Date.now()});_.push(J),r.push(M)}else c.type===""?V({message:"Folders are not supported yet",icon:"carbon:face-dissatisfied",classes:"text-orange"}):b.some(h=>c.type.includes(h))?_.push(c):V({message:`"${c.type}" file type is not allowed`,icon:"carbon:face-dissatisfied",classes:"text-orange"});u.value=[...u.value,..._]}}async function v(){if(Y.value||ee.value)return;const a=[];for(const f of u.value){const _=new FileReader;_.readAsDataURL(f);const c=(await new Promise(h=>{_.onload=()=>h(_.result)})).split(";base64,").pop();a.push({name:f.name,data:c})}await X.writeStaticAssets(await te(),[...a],p.folder).then(()=>{t("uploaded"),A(),V({message:"Files uploaded successfully!",icon:"i-carbon:checkmark"})}).catch(f=>{console.error(f),A(),V({message:`Error uploading files: ${f}`,icon:"i-carbon-warning",classes:"text-red"})}),i.value=!1}function s(a){u.value?.splice(a,1)}function d(a){return URL.createObjectURL(a)}function D(a,f){const[_,r]=a.name.split("."),c=f.replace(/\.\w+$/,""),h=`${c}.${r}`;return c.length===0?(alert("File name must be at least 1 characters long"),_):(Object.defineProperty(a,"name",{value:h,writable:!1}),u.value.splice(u.value.indexOf(a),1,a),a)}function k(){u.value=[]}function A(){i.value=!1,k()}return U("dragenter",P),U("dragleave",B),U("dragover",E),U("drop",L),(a,f)=>{const _=q,r=se,c=ne,h=W;return o(),l("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:K(n(i)?"opacity-100 visible":"opacity-0 invisible")},[m(_,{icon:"carbon-close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",onClick:A}),n(u)?.length?(o(),l("div",ye,[$e,e("div",ke,[(o(!0),l(I,null,O(n(u),(C,R)=>(o(),l("div",{key:C.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[e("div",Ce,[e("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:d(C)},null,8,Pe)]),e("div",Ae,[m(c,{n:"xs","flex-auto":"","model-value":C.name,"onUpdate:modelValue":M=>D(C,M.target.value)},null,8,["model-value","onUpdate:modelValue"]),m(_,{icon:"carbon-delete","flex-none":"",title:"Remove file",onClick:M=>s(R)},null,8,["onClick"])])]))),128))]),e("div",Fe,[n(u).length?(o(),F(h,{key:0,n:"red",onClick:k},{default:S(()=>[m(r,{icon:"carbon-clean"}),z(" Clear ")]),_:1})):N("",!0),m(h,{disabled:!n(u).length,n:"primary solid",onClick:v},{default:S(()=>[m(r,{icon:"carbon-cloud-upload"}),z(" Upload ")]),_:1},8,["disabled"])])])):(o(),l("div",we,[e("label",be,[m(r,{icon:"carbon-cloud-upload","mr-2":""}),z(" Drop files here or click to select ")]),e("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:f[0]||(f[0]=C=>g(C.target.files))},null,32)]))],2)}}}),Ie=j({__name:"AssetFontPreview",props:{asset:{}},setup($){const t=$,p=y(()=>`devtools-assets-${oe(t.asset)}`);return ae(y(()=>`
  @font-face {
    font-family: '${p.value}';
    src: url('${t.asset.publicPath}');
  }
`)),(i,w)=>(o(),l("div",{"of-hidden":"",style:ie({fontFamily:`'${n(p)}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),Ne={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},Se=["src"],Te={key:2,"i-carbon-document":"","text-3xl":"",op20:""},je={key:3,"w-full":"","self-start":"",p4:""},Ee=["textContent"],ze={key:4,"i-carbon-help":"","text-3xl":"",op20:""},Z=j({__name:"AssetPreview",props:{asset:{},textContent:{}},setup($){return(t,p)=>{const i=Ie;return o(),l("div",Ne,[t.asset.type==="image"?(o(),l("img",{key:0,src:t.asset.publicPath},null,8,Se)):t.asset.type==="font"?(o(),F(i,{key:t.asset.publicPath,asset:t.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):t.asset.type==="text"&&!t.textContent?(o(),l("div",Te)):t.asset.type==="text"&&t.textContent?(o(),l("div",je,[e("pre",{"max-h-10rem":"","of-hidden":"","font-mono":"","text-xs":"",textContent:x(t.textContent)},null,8,Ee)])):(o(),l("div",ze))])}}}),Be={flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},Le={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},Me=j({__name:"AssetGridItem",props:{asset:{},folder:{}},setup($){const t=$,p=y(()=>t.folder&&t.asset.path.startsWith(t.folder)?t.asset.path.slice(t.folder.length):t.asset.path);return(i,w)=>{const u=Z;return o(),l("button",Be,[m(u,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:i.asset},null,8,["asset"]),e("div",Le,x(n(p)),1)])}}}),Oe={flex:"~ gap-1","w-full":"","items-center":"",hover:"bg-active",rounded:"",px4:"",py2:""},Re={"of-hidden":"",truncate:"","ws-nowrap":"","text-center":""},Ue=j({__name:"AssetListItem",props:{asset:{}},setup($){const t=$,p=y(()=>t.asset.type==="image"?"i-carbon-image":t.asset.type==="video"?"i-carbon-video":t.asset.type==="audio"?"i-carbon-volume-up":t.asset.type==="font"?"i-carbon-text-small-caps":t.asset.type==="text"?"i-carbon-document":t.asset.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(i,w)=>(o(),l("button",Oe,[e("div",{class:K(n(p))},null,2),e("div",Re,x(i.asset.path),1)]))}}),Ve={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},Xe=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Preview "),e("div",{"x-divider":""})],-1),qe={flex:"~","items-center":"","justify-center":""},Ge=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Details "),e("div",{"x-divider":""})],-1),Ke={"max-w-full":"","w-full":"","table-fixed":""},We=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1),Ze={flex:"~ gap-1","w-full":"","items-center":""},He=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1),Je={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},Qe={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},Ye=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1),et={capitalize:""},tt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1),st={key:0},nt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1),ot=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1),at=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1),it={op70:""},lt=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Actions "),e("div",{"x-divider":""})],-1),rt={flex:"~ gap2 wrap"},ct=e("div",{"flex-auto":""},null,-1),ut=j({__name:"AssetDetails",props:{asset:{}},setup($){const t=$,p=he(),i=G(()=>{if(t.asset.type==="image")return X.getImageMeta(t.asset.filePath)}),w=G(()=>{if(t.asset.type==="text")return X.getTextAssetContent(t.asset.filePath)}),u=le(),b=y(()=>(u.value?._installedModules||[]).some(d=>d.meta?.name==="@nuxt/image"||d.meta?.name==="@nuxt/image-edge")),P=y(()=>{const s=[];if(t.asset.type==="image"){const d=i.value?.width?`
  width="${i.value.width}"
  height="${i.value.height}" `:" ";return s.push({lang:"vue-html",code:`<img${d}
  src="${t.asset.publicPath}"
/>`,name:"Plain Image"}),b.value&&s.push({lang:"vue-html",code:`<NuxtImage${d}
  src="${t.asset.publicPath}"
/>`,name:"Nuxt Image",docs:"https://image.nuxtjs.org/components/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${d}
  src="${t.asset.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxtjs.org/components/nuxt-picture"}),s}return s.push({lang:"html",code:`<a download href="${t.asset.publicPath}">
  Download ${t.asset.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),s}),B=ve(),E=re(()=>t.asset.mtime),L=y(()=>{const s=t.asset.size;return s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(2)} KB`:`${(s/1024/1024).toFixed(2)} MB`}),g=y(()=>{if(!i.value?.width||!i.value?.height)return"";const s=(D,k)=>k?s(k,D%k):D,d=s(i.value.width,i.value.height);return d>3?`${i.value.width/d}:${i.value.height/d}`:""}),v=y(()=>["image","text","video","font"].includes(t.asset.type));return(s,d)=>{const D=Z,k=fe,A=q,a=W,f=_e;return o(),l("div",Ve,[n(v)?(o(),l(I,{key:0},[Xe,e("div",qe,[m(D,{"max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:s.asset,"text-content":n(w)},null,8,["asset","text-content"])])],64)):N("",!0),Ge,e("table",Ke,[e("tbody",null,[e("tr",null,[We,e("td",null,[e("div",Ze,[m(k,{filepath:s.asset.filePath,"text-left":""},null,8,["filepath"]),m(A,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",onClick:d[0]||(d[0]=_=>n(p)(s.asset.filePath))})])])]),e("tr",null,[He,e("td",null,[e("div",Je,[e("div",Qe,x(s.asset.publicPath),1),m(A,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",onClick:d[1]||(d[1]=_=>n(B)(s.asset.publicPath))}),m(A,{"flex-none":"",to:s.asset.publicPath,icon:"carbon-launch",target:"_blank",title:"Open in browser"},null,8,["to"])])])]),e("tr",null,[Ye,e("td",et,x(s.asset.type),1)]),n(i)?.width?(o(),l(I,{key:0},[e("tr",null,[tt,e("td",null,x(n(i).width)+" x "+x(n(i).height),1)]),n(g)?(o(),l("tr",st,[nt,e("td",null,x(n(g)),1)])):N("",!0)],64)):N("",!0),e("tr",null,[ot,e("td",null,x(n(L)),1)]),e("tr",null,[at,e("td",null,[z(x(new Date(s.asset.mtime).toLocaleString())+" ",1),e("span",it,"("+x(n(E))+")",1)])])])]),lt,e("div",rt,[m(a,{to:s.asset.publicPath,download:"",target:"_blank",icon:"carbon-download"},{default:S(()=>[z(" Download ")]),_:1},8,["to"]),s.asset.type==="image"?(o(),F(a,{key:0,disabled:"",icon:"carbon-image-service"},{default:S(()=>[z(" Optimize image (Coming soon) ")]),_:1})):N("",!0)]),ct,n(P).length?(o(),F(f,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":n(P)},null,8,["code-snippets"])):N("",!0)])}}}),dt={"h-full":"","of-auto":""},pt={"flex-none":"",flex:"~ gap2 items-center"},mt={op50:""},ft={key:0},_t={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},ht={key:1,p2:"",grid:"~ cols-minmax-8rem"},vt={key:1},It=j({__name:"assets",setup($){const t=ce(),p=T(""),i=y(()=>new ue(t.value||[],{keys:["path"]})),w=y(()=>p.value?i.value.search(p.value).map(v=>v.item):t.value||[]),u=y(()=>{const g={};for(const v of w.value){const s=`${v.path.split("/").slice(0,-1).join("/")}/`;g[s]||(g[s]=[]),g[s].push(v)}return Object.entries(g).sort(([v],[s])=>v.localeCompare(s))}),b=T(),P=T("grid");function B(){P.value=P.value==="list"?"grid":"list"}de("Escape",()=>{b.value=void 0});const E=T();function L(){}return(g,v)=>{const s=q,d=Q,D=De,k=Me,A=me,a=Ue,f=ut,_=ge;return o(),l("div",dt,[m(d,{ref_key:"navbar",ref:E,search:n(p),"onUpdate:search":v[0]||(v[0]=r=>pe(p)?p.value=r:null),pb2:""},{actions:S(()=>[e("div",pt,[m(s,{"text-lg":"",icon:n(P)==="grid"?"i-carbon-list":"i-carbon-grid",title:"Toggle view",onClick:B},null,8,["icon"])])]),default:S(()=>[e("div",mt,[n(p)?(o(),l("span",ft,x(n(w).length)+" matched · ",1)):N("",!0),e("span",null,x(n(t)?.length)+" assets in total",1)])]),_:1},8,["search"]),m(D,{folder:"/",onUploaded:L}),n(P)==="grid"?(o(),l(I,{key:0},[n(u).length>1?(o(!0),l(I,{key:0},O(n(u),([r,c])=>(o(),F(A,{key:r,text:r,description:`${c.length} items`,open:c.length<=("DETAILS_MAX_ITEMS"in g?g.DETAILS_MAX_ITEMS:n(xe)),padding:!1},{default:S(()=>[e("div",_t,[(o(!0),l(I,null,O(c,h=>(o(),F(k,{key:h.path,asset:h,folder:r,onClick:C=>b.value=h},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(o(),l("div",ht,[(o(!0),l(I,null,O(n(w),r=>(o(),F(k,{key:r.path,asset:r,onClick:c=>b.value=r},null,8,["asset","onClick"]))),128))]))],64)):(o(),l("div",vt,[(o(!0),l(I,null,O(n(w),r=>(o(),F(a,{key:r.path,asset:r,onClick:c=>b.value=r},null,8,["asset","onClick"]))),128))])),m(_,{"model-value":!!n(b),"auto-close":"","w-120":"",navbar:n(E),onClose:v[1]||(v[1]=r=>b.value=void 0)},{default:S(()=>[n(b)?(o(),F(f,{key:0,asset:n(b)},null,8,["asset"])):N("",!0)]),_:1},8,["model-value","navbar"])])}}});export{It as default};
