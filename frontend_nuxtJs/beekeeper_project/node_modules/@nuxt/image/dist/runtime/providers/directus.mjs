import { joinURL } from "ufo";
import { createOperationsGenerator } from "#image";
export const operationsGenerator = createOperationsGenerator({
  joinWith: "&"
});
export const getImage = (src, { modifiers = {}, baseURL } = {}) => {
  const transforms = modifiers.transforms;
  if (transforms && transforms.length > 0) {
    modifiers.transforms = new URLSearchParams(JSON.stringify(transforms)).toString().replace(/=+$/, "");
  }
  const operations = operationsGenerator(modifiers);
  return {
    url: joinURL(baseURL, src + (operations ? "?" + operations : ""))
  };
};
