{"version":3,"file":"login-90bb0d94.js","sources":["../../../../additional_func/login.js","../../../../pages/login.vue"],"sourcesContent":["import axios from \"axios\";\r\nimport { api_root } from '@/main'\r\n\r\n\r\nexport default async function login(data){\r\n    try {\r\n        var response = await axios({url: `${api_root}api/token/`,\r\n        method: \"post\",\r\n        data: data,\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n      return response\r\n      } catch (error) {\r\n        return error.response\r\n      }\r\n    }","<template>\r\n  <div id=\"login_main\">\r\n    <div class=\"sot-ob\">\r\n      <div class=\"wrapper flex\">\r\n        <div class=\"login-page flex\">\r\n          <AuthImageForm></AuthImageForm>\r\n          <div class=\"form\">\r\n            <p class=\"small login-p\" @click=\"alert(1234)\">Войти в аккаунт</p>\r\n\r\n            <div class=\"flex h_sto\">\r\n              <div class=\"login-form auto\">\r\n                <div class=\"error_list\">\r\n                  <div v-if=\"login_401\">\r\n                    Нету учетной записи с введенными данными\r\n                  </div>\r\n                </div>\r\n                <input type=\"text\" placeholder=\"username\" v-model=\"username\" />\r\n                <input\r\n                  type=\"password\"\r\n                  placeholder=\"password\"\r\n                  v-model=\"password\"\r\n                />\r\n                <button @click=\"login_request($event)\">login</button>\r\n                <p class=\"message\">\r\n                  Not registered? <a href=\"#\">Create an account</a>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style lang=\"scss\" src=\"../assets/css/login.scss\" scoped></style>\r\n<script>\r\nimport login from \"@/additional_func/login\";\r\nimport redirect from \"@/additional_func/redirect\";\r\nexport default {\r\n  el: \"#login_main\",\r\n  methods: {\r\n    set_cookie(response) {\r\n      var now = new Date();\r\n      var time = now.getTime();\r\n      var expireTime = time + 1000 * 3600;\r\n      now.setTime(expireTime);\r\n      (document.cookie =\r\n        \"assess=\" +\r\n        response.data.access +\r\n        \";expires=\" +\r\n        now.toUTCString() +\r\n        \";path=/\"),\r\n        (document.cookie =\r\n          \"refresh=\" +\r\n          response.data.refresh +\r\n          \";expires=\" +\r\n          now.toUTCString() +\r\n          \";path=/\");\r\n    },\r\n\r\n    async login_request(event) {\r\n      event.preventDefault;\r\n      let obj = {\r\n        username: this.username,\r\n        password: this.password,\r\n      };\r\n      let response = await login(JSON.stringify(obj));\r\n      console.log(response);\r\n      if (response.status == 200) {\r\n        this.set_cookie(response);\r\n        redirect(this, {\r\n          path: \"/profile\",\r\n        });\r\n      } else if (response.status == 401) {\r\n        console.log(\"asd\");\r\n        this.login_401 = true;\r\n      } else if (response == 404) {\r\n        alert(\"сайт на проверке, подождите 5 минут\");\r\n      }\r\n      return false;\r\n    },\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      username: \"gag\",\r\n      password: \"13\",\r\n      login_401: false,\r\n    };\r\n  },\r\n};\r\n</script>\r\n"],"names":["login","_ssrRenderAttrs","_mergeProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAIe,eAAeA,QAAM,MAAK;AACrC,MAAI;AACA,QAAI,WAAW,MAAM,MAAM;AAAA,MAAC,KAAK,GAAG;AAAA,MACpC,QAAQ;AAAA,MACR;AAAA,MACA,SAAS;AAAA,QACP,gBAAgB;AAAA,MACjB;AAAA,IACT,CAAO;AACD,WAAO;AAAA,EACN,SAAQ,OAAP;AACA,WAAO,MAAM;AAAA,EACd;AACP;;ACqBA,MAAK,YAAU;AAAA,EACb,IAAI;AAAA,EACJ,SAAS;AAAA,IACP,WAAW,UAAU;AACnB,UAAI,MAAM,oBAAI;AACd,UAAI,OAAO,IAAI;AACf,UAAI,aAAa,OAAO,MAAO;AAC/B,UAAI,QAAQ,UAAU;AACtB,MAAC,SAAS,SACR,YACA,SAAS,KAAK,SACd,cACA,IAAI,YAAc,IAClB,WACC,SAAS,SACR,aACA,SAAS,KAAK,UACd,cACA,IAAI,YAAc,IAClB;AAAA,IACL;AAAA,IAED,MAAM,cAAc,OAAO;AACzB,YAAM;AACN,UAAI,MAAM;AAAA,QACR,UAAU,KAAK;AAAA,QACf,UAAU,KAAK;AAAA;AAEjB,UAAI,WAAW,MAAMA,QAAM,KAAK,UAAU,GAAG,CAAC;AAC9C,cAAQ,IAAI,QAAQ;AACpB,UAAI,SAAS,UAAU,KAAK;AAC1B,aAAK,WAAW,QAAQ;AACxB,iBAAS,MAAM;AAAA,UACb,MAAM;AAAA,QACR,CAAC;AAAA,iBACQ,SAAS,UAAU,KAAK;AACjC,gBAAQ,IAAI,KAAK;AACjB,aAAK,YAAY;AAAA,iBACR,YAAY,KAAK;AAC1B,cAAM,qCAAqC;AAAA,MAC7C;AACA,aAAO;AAAA,IACR;AAAA,EAEF;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,MACV,UAAU;AAAA,MACV,WAAW;AAAA;EAEd;AACH;;;AAzFO,QAAA,OAAAC,eAAAC,WAAA,EAAA,IAAG,gBAAY,MAAA,CAAA,+IAAA;;;MAWO,MAAS,WAAA;;;;;iFAI6B,MAAQ,QAAA,yFAIhD,MAAQ,QAAA;;;;;;;;;"}