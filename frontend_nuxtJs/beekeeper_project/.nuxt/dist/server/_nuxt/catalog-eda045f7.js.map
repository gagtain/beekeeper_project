{"version":3,"file":"catalog-eda045f7.js","sources":["../../../../assets/images/filter.png","../../../../additional_func/getProductlist.js","../../../../additional_func/getCategoryList.js","../../../../components/Catalog/FilterCatalog.vue","../../../../components/Catalog/SortedCatalog.vue","../../../../additional_func/getSearchProduct.js","../../../../pages/catalog.vue"],"sourcesContent":["export default \"__VITE_ASSET__ecdae8d0__\"","import axios from \"axios\";\r\nimport { api_root } from '@/main'\r\n\r\n\r\nexport default async function getProductList(size){\r\n    try {\r\n        var response = await axios({url: `${api_root}api/v0.1/beekeeper_web_api/product?size=${size}`,\r\n        method: \"get\",\r\n        headers:{\r\n\r\n        },\r\n        withCredentials: true\r\n      })\r\n      return response\r\n      } catch (error) {\r\n        return error.response\r\n      }\r\n    }","import axios from \"axios\";\r\nimport { api_root } from '@/main'\r\n\r\n\r\nexport default async function getCategoryList(){\r\n    try {\r\n        var response = await axios({url: `${api_root}api/v0.1/beekeeper_web_api/category`,\r\n        method: \"get\",\r\n        headers:{\r\n\r\n        },\r\n        withCredentials: true\r\n      })\r\n      return response\r\n      } catch (error) {\r\n        return error.response\r\n      }\r\n    }","<template>\r\n  <div id=\"filter\">\r\n    <p class=\"filter-p small\">Категория</p>\r\n    <ul class=\"filter-ul\">\r\n      <li\r\n        @click.stop=\"add($event, `category__name=${cat.name}`)\"\r\n        v-for=\"(cat, index) in category_list\"\r\n        :key=\"index\"\r\n        class=\"filter-li normal-small\"\r\n      >\r\n          {{ cat.name }}\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" src=\"../../assets/css/katalog/filter.scss\" scoped></style>\r\n<script>\r\nimport getCategoryList from '~/additional_func/getCategoryList';\r\n\r\nexport default {\r\n  el: \"#filter\",\r\n  name: \"FilterCatalog\",\r\n  data() {\r\n    return {\r\n      filter_catalog: [],\r\n      filter_class_name: [],\r\n      filter_packaging_name: [],\r\n      cat_list: [],\r\n      category_list: []\r\n    };\r\n  },\r\n  async mounted(){\r\n    let r = await getCategoryList()\r\n    this.category_list = r.data\r\n  },\r\n  methods: {\r\n    add(event, params){\r\n      if (this.addClassActive(event.srcElement)){\r\n\r\n        this.$store.ADD_CATALOG_PARAMS(params)\r\n      }else{\r\n        \r\n      this.$store.REMOVE_CATALOG_PARAMS(params)\r\n      }\r\n\r\n    },\r\n    addClassActive(event) {\r\n      console.log(event)\r\n      if (event.classList.contains(\"active\")) {\r\n        event.classList.remove(\"active\");\r\n        return false\r\n      } else {\r\n        event.classList.add(\"active\");\r\n        return true\r\n      }\r\n    },\r\n  },\r\n\r\n  setup() {},\r\n};\r\n</script>\r\n","<template>\r\n  <div class=\"sorted-product flex jus-sp\" id=\"sorted\">\r\n    <p\r\n      @click=\"sorteredAlfFunc()\"\r\n      :class=\"sorteredAlf ? 'act_sorted-p' : ''\"\r\n      class=\"sorted-p small\"\r\n    >\r\n      По имени\r\n    </p>\r\n\r\n    <p\r\n      @click=\"sorteredMoneyFUnc()\"\r\n      :class=\"sorteredMonet ? 'act_sorted-p' : ''\"\r\n      class=\"sorted-p small\"\r\n    >\r\n      По цене\r\n    </p>\r\n    <p\r\n      @click=\"sorteredNewFUnc()\"\r\n      :class=\"sorteredNew ? 'act_sorted-p' : ''\"\r\n      class=\"sorted-p small\"\r\n    >\r\n      Новое\r\n    </p>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n.act_sorted-p{\r\n    color: red;\r\n    cursor: default;\r\n    pointer-events: none;\r\n}\r\n.sorted-p{\r\n  cursor: pointer;\r\n        padding: 2px;\r\n}\r\n@media (max-width: 460px) {\r\n  .sorted-p{\r\n    font-size: 20px;\r\n  }\r\n    .sorted-p{\r\n        padding: 2px;\r\n    }\r\n}\r\n@media (max-width: 350px) {\r\n  .sorted{\r\n    justify-content:baseline;\r\n  }\r\n}\r\n.sorted-product{\r\n  width: 100%;\r\n}\r\n\r\n</style>\r\n<script>\r\nexport default {\r\n  el: \"#sorted\",\r\n  name: \"SortedCatalog\",\r\n  data() {\r\n    return {\r\n      sorted_list: [],\r\n      sorteredAlf: false,\r\n      sorteredMonet: false,\r\n      sorteredNew: false,\r\n    };\r\n  },\r\n    props: [\"catalog_list\"],\r\n  methods: {\r\n      async sorteredAlfFunc() {\r\n          this.$store.ADD_ORDER_BY_CATALOG_PARAMS(\"order_by=name\", [\"order_by=price_min\", \"order_by=pk\"])\r\n          this.sorteredAlf = !this.sorteredAlf\r\n          this.sorteredMonet = false\r\n          this.sorteredNew = false\r\n        },\r\n      async sorteredMoneyFUnc() {\r\n          this.$store.ADD_ORDER_BY_CATALOG_PARAMS(\"order_by=price_min\", [\"order_by=name\", \"order_by=pk\"])\r\n          this.sorteredMonet = !this.sorteredMonet\r\n          this.sorteredAlf = false\r\n          this.sorteredNew = false\r\n      },\r\n      async sorteredNewFUnc() {\r\n\r\n          this.$store.ADD_ORDER_BY_CATALOG_PARAMS(\"order_by=pk\", [\"order_by=name\", \"order_by=price_min\"])\r\n          this.sorteredNew = !this.sorteredNew\r\n          this.sorteredMonet = false\r\n          this.sorteredAlf = false\r\n      },\r\n      },\r\n  setup() {},\r\n};\r\n</script>\r\n","import axios from \"axios\";\nimport { api_root } from '@/main'\n\n\nexport default async function getSearchProduct(params){\n    try {\n        var response = await axios({url: `${api_root}api/v0.1/beekeeper_web_api/product/search?${params}`,\n        method: \"get\",\n        headers:{\n\n        },\n        withCredentials: true\n      })\n      return response\n      } catch (error) {\n        return error.response\n      }\n    }","<template>\r\n  <div id=\"catalog\">\r\n    <div class=\"absolute flex w-sto h_sto\" style=\"pointer-events: none;\">\r\n      <dialog id=\"dialog\" class=\"absolute auto\" style=\"pointer-events: auto;\">\r\n        <FilterCatalog :category_list=\"category_list\" :catalog_list=\"catalog_list\" @UpdateClassFiler=\"filterClassReg\"></FilterCatalog>\r\n        <button class=\"btn w-sto btn-green\"  onclick=\"window.dialog.close();\">Показать</button>\r\n        <button onclick=\"window.dialog.close();\" aria-label=\"close\" class=\"x\">\r\n          ❌\r\n        </button>\r\n      </dialog>\r\n    </div>\r\n    <div class=\"sot-ob\">\r\n      <div class=\"wrapper-product w-sto flex\">\r\n        <div class=\"interactiv auto back\">\r\n        <p style=\"margin-left: 5%;\" class=\"small\" v-if=\"$route.query.filter\">{{JSON.parse($route.query.filter).name}}</p>\r\n          <div class=\"flex w-sto product_div\">\r\n            <div class=\"block filter_div\">\r\n              <div class=\"filter-product\" id=\"filter_desk\">\r\n        <FilterCatalog :category_list=\"category_list\" :catalog_list=\"catalog_list\"></FilterCatalog>\r\n              </div>\r\n            </div>\r\n            <div class=\"product_osnov relative\">\r\n              <div class=\"sorted_div flex jus-sp\">\r\n                  \r\n        <SortedCatalog :catalog_list=\"catalog_list\"></SortedCatalog>\r\n                <div class=\"mob_filter flex\">\r\n                  <img onclick=\"window.dialog.showModal();\" class=\"open_filter_mob auto\" src=\"~assets/images/filter.png\" alt=\"\">\r\n                </div>\r\n              </div>\r\n              \r\n              <div\r\n                  v-if=\"catalog_list.length\" class=\"w-sto product-list flex\">\r\n                <CatalogProduct v-for=\"pr in catalog_list\" :key=\"pr.id\" :pr=\"pr\" ></CatalogProduct>\r\n              </div>\r\n              <LoadingComp v-else-if=\"!catalog_loads\"></LoadingComp>\r\n              <div v-else style=\"width: 50%;margin: auto;margin-top: 10%;\">\r\n                    <div style=\"text-align: center;\" class=\"flex w-sto\">\r\n\r\n                      <p style=\"font-size: 28px;\" class=\"VAG auto\">Товаров с выбранными параметрами нету :(</p>\r\n                    </div>\r\n                    <div class=\"select_size\" >\r\n                      <NuxtLink to=\"/catalog\">\r\n                            <button @click=\"clear_filter()\" style=\"background: rgb(255, 188, 65); cursor: pointer; width: 100%; border: medium none; border-radius: 6px;font-size: 26px;padding: 2%;margin-top: 1%;\" >\r\n                              Сбросить настройки\r\n                            </button>\r\n                          </NuxtLink>\r\n                          </div>\r\n                  </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" src=\"~/assets/css/katalog/katalog.scss\" scoped></style>\r\n<style lang=\"scss\" src=\"~/assets/css/interactive/checkbox.scss\" scoped></style>\r\n<style lang=\"css\" src=\"~/assets/css/main/hex-tovar.css\"></style>\r\n<style scoped>\r\n.photo-main img {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.back {\r\n  background: antiquewhite;\r\n  padding: 2%;\r\n  border-radius: 5px;  \r\n  min-height: 833px;\r\n}\r\n</style>\r\n<script setup>\r\nimport { useHead } from \"nuxt/app\";\r\nuseHead({\r\n    title: 'Пчелиная артель - Каталог',})\r\n</script>\r\n<script>\r\nimport getProductList from \"~/additional_func/getProductlist\";\r\nimport FilterCatalog from \"~/components/Catalog/FilterCatalog.vue\";\r\nimport SortedCatalog from '~/components/Catalog/SortedCatalog.vue';\r\nimport CatalogProduct from '~/components/Catalog/CatalogProduct.vue';\r\nimport getCategorylist from \"~/additional_func/getCategoryList\";\r\nimport getSearchProduct from \"~/additional_func/getSearchProduct\";\r\nimport LoadingComp from '../components/AddtionalComp/LoadingComp.vue';\r\nexport default {\r\n  el: \"#catalog\",\r\n  name: \"CatalogItem\",\r\n  components:{\r\n    FilterCatalog,\r\n    SortedCatalog,\r\n    CatalogProduct,\r\n    LoadingComp\r\n  },\r\n  data() {\r\n    return {\r\n      catalog_list: [],\r\n      filter_teleport: false,\r\n      category_list: [],\r\n      type_packaging: [],\r\n      CATALOG_LIST_STATE: this.$store.getCatalog_list,\r\n      filters: false,\r\n      catalog_loads: false,\r\n      data: this.$store.getCatalog_params\r\n    };\r\n  },\r\n  async mounted() {\r\n    if (this.$route.query.filter){\r\n      this.$store.ADD_CATALOG_PARAMS(`name=${JSON.parse(this.$route.query.filter).name}`)\r\n    }else{\r\n\r\n      this.getCatalog()\r\n    }\r\n  },\r\n\r\n  methods:{\r\n    async clear_filter(){\r\n      await this.$router.replace({'query': null});\r\n      this.$store.CLEAR_CATALOG_PARAMS()\r\n      this.getCatalog()\r\n      this.data = this.$store.getCatalog_params\r\n      \r\n    },\r\n    async restartCatalog(){\r\n      this.catalog_loads = false\r\n      let catalog_response = null\r\n    if (this.$route.query?.filter){\r\n      \r\n      catalog_response = await getSearchProduct(`name=${JSON.parse(this.$route.query.filter).name}`)\r\n      this.filters = true\r\n    }else{\r\n      catalog_response = await getProductList(50);\r\n    }\r\n    console.log(catalog_response, 342)\r\n    this.catalog_list = catalog_response.data;\r\n    this.catalog_list_sorted = this.catalog_list.slice();\r\n    this.$store.REFACTOR_CATALOG_LIST(this.catalog_list)\r\n    this.catalog_loads = true\r\n    },\r\n  async filterReg(){\r\n    \r\n    let category_response = await getCategorylist();\r\n    this.category_list = category_response.data\r\n  },\r\n   async getCatalog(){\r\n      this.catalog_loads = false\r\n    let r = await getSearchProduct(this.$store.getCatalog_params.join(\"&\"))\r\n    this.catalog_list = r.data\r\n      this.catalog_loads = true\r\n  }\r\n  },\r\n  watch:{\r\n    '$route.query': async function () {\r\n      if(this.$route.query.filter){\r\n\r\n        this.$store.ADD_CATALOG_PARAMS(`name=${JSON.parse(this.$route.query.filter).name}`)\r\n      }\r\n    },\r\n    data: {\r\n    handler(val, oldVal) {\r\n      console.log(213)\r\n      this.getCatalog()\r\n    },\r\n    deep: true\r\n  },\r\n  }\r\n};\r\n</script>\r\n"],"names":["_sfc_main","_ssrRenderAttrs","_mergeProps","_ssrInterpolate","getCategorylist"],"mappings":"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"}