{"version":3,"file":"checkout-b274f29c.js","sources":["../../../../node_modules/nuxt/dist/app/components/client-only.js","../../../../additional_func/OrderAssept/createOrderPayment.js","../../../../additional_func/addOrder.js","../../../../additional_func/Delivery/createDeliveryLait.js","../../../../components/AddtionalComp/Submit_order.vue","../../../../pages/checkout.vue"],"sourcesContent":["import { createElementBlock, createElementVNode, defineComponent, h, mergeProps, onMounted, ref } from \"vue\";\nexport default defineComponent({\n  name: \"ClientOnly\",\n  inheritAttrs: false,\n  // eslint-disable-next-line vue/require-prop-types\n  props: [\"fallback\", \"placeholder\", \"placeholderTag\", \"fallbackTag\"],\n  setup(_, { slots, attrs }) {\n    const mounted = ref(false);\n    onMounted(() => {\n      mounted.value = true;\n    });\n    return (props) => {\n      if (mounted.value) {\n        return slots.default?.();\n      }\n      const slot = slots.fallback || slots.placeholder;\n      if (slot) {\n        return slot();\n      }\n      const fallbackStr = props.fallback || props.placeholder || \"\";\n      const fallbackTag = props.fallbackTag || props.placeholderTag || \"span\";\n      return createElementBlock(fallbackTag, attrs, fallbackStr);\n    };\n  }\n});\nconst cache = /* @__PURE__ */ new WeakMap();\nexport function createClientOnly(component) {\n  if (cache.has(component)) {\n    return cache.get(component);\n  }\n  const clone = { ...component };\n  if (clone.render) {\n    clone.render = (ctx, ...args) => {\n      if (ctx.mounted$) {\n        const res = component.render(ctx, ...args);\n        return res.children === null || typeof res.children === \"string\" ? createElementVNode(res.type, res.props, res.children, res.patchFlag, res.dynamicProps, res.shapeFlag) : h(res);\n      } else {\n        return h(\"div\", mergeProps(ctx.$attrs ?? ctx._.attrs, { key: \"placeholder-key\" }));\n      }\n    };\n  } else if (clone.template) {\n    clone.template = `\n      <template v-if=\"mounted$\">${component.template}</template>\n      <template v-else><div></div></template>\n    `;\n  }\n  clone.setup = (props, ctx) => {\n    const mounted$ = ref(false);\n    onMounted(() => {\n      mounted$.value = true;\n    });\n    return Promise.resolve(component.setup?.(props, ctx) || {}).then((setupState) => {\n      return typeof setupState !== \"function\" ? { ...setupState, mounted$ } : (...args) => {\n        if (mounted$.value) {\n          const res = setupState(...args);\n          return res.children === null || typeof res.children === \"string\" ? createElementVNode(res.type, res.props, res.children, res.patchFlag, res.dynamicProps, res.shapeFlag) : h(res);\n        } else {\n          return h(\"div\", mergeProps(ctx.attrs, { key: \"placeholder-key\" }));\n        }\n      };\n    });\n  };\n  cache.set(component, clone);\n  return clone;\n}\n","import axios from \"axios\";\nimport { api_root } from '@/main'\n\nexport default async function createOrderPayment(payment_data){\n    try {\n        var response = await axios({url: `${api_root}api/v0.1/payments/create/`,\n        method: \"post\",\n        headers:{\n\n        },\n        withCredentials: true,\n        data:{\n          ...payment_data\n        }\n      })\n      return response\n      } catch (error) {\n        return error.response\n      }\n    }","import axios from \"axios\";\nimport { api_root } from '@/main'\n\nexport default async function addOrder(delivery_price){\n    try {\n        var response = await axios({url: `${api_root}api/v0.1/beekeeper_web_api/order/create`,\n        method: \"post\",\n        headers:{\n\n        },\n        withCredentials: true,\n        data:{\n          delivery_price\n        }\n      })\n      return response\n      } catch (error) {\n        return error.response\n      }\n    }","import axios from \"axios\";\nimport { api_root } from '@/main'\n\nexport default async function createDeliveryLait(data){\n    try {\n        var response = await axios({url: `${api_root}api/v0.1/delivery/create/lait`,\n        method: \"post\",\n        headers:{\n\n        },\n        withCredentials: true,\n        data: data\n      })\n      return response\n      } catch (error) {\n        return error.response\n      }\n    }","<template>\n    <div id=\"sub_order\" class=\"w-sto\">\n        <RouterLink v-if=\"items.length\" to=\"/checkout\"> <button @click=\"submin_order\" class=\"w-sto\"> <div class=\"fon_btn\"></div>Оплатить онлайн</button></RouterLink>\n      <RouterLink v-else to=\"/catalog\"><button class=\"w-sto\"> <div class=\"fon_btn\"></div> Добавить товар</button></RouterLink>\n   \n    </div>\n</template>\n\n<style src=\"~/assets/css/account.css\" scoped></style>\n<script>\nimport createOrderPayment from '~/additional_func/OrderAssept/createOrderPayment';\nimport addOrder from '~/additional_func/addOrder';\nimport createDeliveryLait from '~/additional_func/Delivery/createDeliveryLait';\nexport default {\n    el: '#sub_order',\n  props: ['items', 'forms_validate', 'delivery_info'],\n  data(){\n    return{\n      order_create: null\n    }\n  },\n  methods:{\n\nasync submin_order(){\n    await this.$emit('forms_validate_met')\n  if (this.forms_validate.status){\n    let response_order = await addOrder(this.delivery_info.price)\n    this.order_create = response_order.data\n    let created_delivery = await this.create_delivery_lait()\n // if (response_order.status == 200){\n    \n    if (created_delivery){\n      await this.create_payment()\n    }else{\n      alert('С доставкой произошла проблема, попробуйте перезагрузить страницу')\n    }\n    \n//  }\n  }else{\n    alert(this.forms_validate.message)\n  }\n  \n  \n},\n  async create_payment(){\n    let response_payment = await createOrderPayment({\n      \"payment_service\": \"yookassa\",\n    \"order_service\": \"online_shop\",\n    \"order_id\": this.order_create.id,\n    \"currency\": \"RUB\"\n    })\n    document.location.href = response_payment.data.payment_url\n  },\n  async create_delivery_lait(){\n    let response_delivery = await createDeliveryLait({\n      order_id: this.order_create.id,\n      PVZ: this.delivery_info.id,\n      price: this.delivery_info.price,\n      user_number: this.forms_validate.number.default ? undefined : this.forms_validate.number.number\n      \n    })\n    if (response_delivery.status == 200){\n      return true\n    }else{\n      return false\n    }\n  }\n}\n}\n</script>","<template>\n    \n    <div class=\"sot-ob\">\n        <div class=\"wrapper flex\">\n            <div class=\"user_card flex auto\">\n                <div class=\"interactiv user_card_div auto\" id=\"checkout\">\n\n                    <div class=\"w-sto kor\" id=\"kor\">\n    <p class=\"small-big VAG\">Оформление</p>\n    <div class=\"w-sto flex kor_block jus-sp\">\n        <div class=\"w-sto-1000px checkout\">\n\n            <client-only>\n            <checkout v-on:delivery=\"delivery_price_select($event)\" ref=\"checkout_form\"></checkout>\n\n            </client-only>\n            <p align=\"left\" class=\"VAG small\">Товары</p>\n            \n            <order-product-list :orderList=\"$store.getUser.basket\"></order-product-list>\n        </div>\n            <div class=\"w-sto-1000px register_zakaz\">\n                <Submit_order :delivery_info=\"delivery_info\" v-on:forms_validate_met=\"forms_validate_met\" :items=\"$store.getUser.basket\" :forms_validate=\"forms_validate\"></Submit_order>\n                <ProductListInfo :ordered=\"true\" :items=\"$store.getUser.basket\" :delivery_price=\"delivery_info.price\"></ProductListInfo>\n            </div>\n                    \n                </div>\n                </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<style>\n.img_order_product_div{\n    width: 80px;\n}\n.img_order_product{\n    width: 100%;\n    aspect-ratio: 1/1;\n}\n.product_order_info{\n    padding: 2%;\n}\n.info_order_product_div{\n    padding: 2% 1%;\n    text-align: left;\n}\n.order_description{\n    text-align: left;\n}\n.checkout{\n    width: 50%; padding-top: 20px; padding-left: 2%;\n}\n.register_zakaz{\n    width: 40%;\n}\n@media (max-width: 1000px) {\n    .order{\n        display: block;\n    }\n    .order_description, .product_order{\n        width: 100%;\n    }\n}\n@media (max-width: 500px) {\n    .order{\n        width: 100%;\n    }\n    \n}\n@media (max-width: 1000px) {\n    .w-sto-1000px{\n        width: 100%;\n    }\n}\n</style>\n<style lang=\"css\" src=\"../assets/css/account.css\" scoped></style>\n<script setup>\nimport { useHead } from \"nuxt/app\";\ndefinePageMeta({\n  middleware: [\"is-auth\"]\n  // or middleware: 'auth'\n})\nuseHead({\n    title: 'Пчелиная артель - Оформление заказа',})\n</script>\n<script>\nimport BasketInfo from '~/components/UserComp/BasketComp/BasketInfo.vue';\nimport Checkout from '../components/AddtionalComp/Checkout.vue';\nimport ProductListInfo from '../components/UserComp/BasketComp/ProductListInfo.vue';\nimport Submit_order from '~/components/AddtionalComp/Submit_order.vue';\nimport OrderProductList from '~/components/AddtionalComp/OrderProductList.vue';\nexport default {\n    el:\"#checkout\",\n    components:{\n    BasketInfo,\n    Checkout,\n    ProductListInfo,\n    Submit_order,\n    OrderProductList\n},\nsetup(){\n\ndefinePageMeta({\n  middleware: [\"is-auth\"]\n  // or middleware: 'auth'\n})\nuseHead({\n    title: 'Пчелиная артель - Оформление заказа',})\n},\ndata(){\n    return{\n        forms_validate: false,\n        delivery_info: {\n            price: null\n        }\n    }\n},\n    methods:{\n    forms_validate_met(){\n        this.forms_validate = this.$refs.checkout_form.order_info_select()\n    },\n    async delivery_price_select(delivery_info){\n\n        this.delivery_info = await delivery_info\n    }\n},\n\n}\n</script>"],"names":["_sfc_main","_ssrRenderComponent","_push","_parent","_createVNode"],"mappings":"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","x_google_ignoreList":[0]}