{"version":3,"file":"login-48c1751f.js","sources":["../../../../additional_func/login.js","../../../../pages/login.vue"],"sourcesContent":["import axios from \"axios\";\r\nimport { api_root } from '@/main'\r\n\r\n\r\nexport default async function login(data){\r\n    try {\r\n        var response = await axios({url: `${api_root}api/token/`,\r\n        method: \"post\",\r\n        data: data,\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        withCredentials: true\r\n      })\r\n      return response\r\n      } catch (error) {\r\n        return error.response\r\n      }\r\n    }","<template>\r\n  <div id=\"login_main\">\r\n    <div class=\"sot-ob\">\r\n      <div class=\"wrapper flex\">\r\n        <div class=\"login-page flex\">\r\n          <AuthImageForm></AuthImageForm>\r\n          <div class=\"form\">\r\n            <p class=\"small login-p\">Войти в аккаунт</p>\r\n\r\n            <div class=\"flex h_sto\">\r\n              <div class=\"login-form auto\">\r\n                <div class=\"error_list\">\r\n                  <div v-if=\"login_401\">\r\n                    Нету учетной записи с введенными данными\r\n                  </div>\r\n                  <div v-if=\"message\">\r\n                    {{ message }}\r\n                  </div>\r\n                </div>\r\n                <input type=\"text\" placeholder=\"username\" v-model=\"username\" />\r\n                <input\r\n                  type=\"password\"\r\n                  placeholder=\"password\"\r\n                  v-model=\"password\"\r\n                />\r\n                <button @click=\"login_request($event)\">login</button>\r\n                <p class=\"message\">\r\n                  Not registered? <a href=\"#\">Create an account</a>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style lang=\"scss\" src=\"../assets/css/login.scss\" scoped></style>\r\n<script>\r\nimport login from \"@/additional_func/login\";\r\nimport { useHead } from \"nuxt/app\";\r\nexport default {\r\n  el: \"#login_main\",\r\n  methods: {\r\n\r\n    async login_request(event) {\r\n      let obj = {\r\n        username: this.username,\r\n        password: this.password,\r\n      };\r\n      let response = await login(JSON.stringify(obj));\r\n      if (response.status == 200) {\r\n        await this.$router.push('/profile')\r\n      } else if (response.status == 401) {\r\n        this.login_401 = true;\r\n      } else if (response == 404) {\r\n        alert(\"сайт на проверке, подождите 5 минут\");\r\n      }\r\n    },\r\n\r\n  },\r\n  mounted(){\r\n    this.message = this.$route.query.message\r\n  },\r\n  data() {\r\n    return {\r\n      username: \"gag\",\r\n      password: \"13\",\r\n      login_401: false,\r\n      message: null\r\n    };\r\n  },\r\n    setup() {\r\n      useHead({\r\n    title: 'Пчелиная артель - Вход',\r\n    meta: [\r\n      { name: 'description', content: 'My amazing site.' }\r\n    ],\r\n      })\r\n    }\r\n};\r\n</script>\r\n"],"names":["login","_ssrRenderAttrs","_mergeProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAIe,eAAeA,QAAM,MAAK;AACrC,MAAI;AACA,QAAI,WAAW,MAAM,MAAM;AAAA,MAAC,KAAK,GAAG;AAAA,MACpC,QAAQ;AAAA,MACR;AAAA,MACA,SAAS;AAAA,QACP,gBAAgB;AAAA,MACjB;AAAA,MACD,iBAAiB;AAAA,IACzB,CAAO;AACD,WAAO;AAAA,EACN,SAAQ,OAAP;AACA,WAAO,MAAM;AAAA,EACd;AACP;;ACuBA,MAAK,YAAU;AAAA,EACb,IAAI;AAAA,EACJ,SAAS;AAAA,IAEP,MAAM,cAAc,OAAO;AACzB,UAAI,MAAM;AAAA,QACR,UAAU,KAAK;AAAA,QACf,UAAU,KAAK;AAAA;AAEjB,UAAI,WAAW,MAAMA,QAAM,KAAK,UAAU,GAAG,CAAC;AAC9C,UAAI,SAAS,UAAU,KAAK;AAC1B,cAAM,KAAK,QAAQ,KAAK,UAAU;AAAA,iBACzB,SAAS,UAAU,KAAK;AACjC,aAAK,YAAY;AAAA,iBACR,YAAY,KAAK;AAC1B,cAAM,qCAAqC;AAAA,MAC7C;AAAA,IACD;AAAA,EAEF;AAAA,EACD,UAAS;AACP,SAAK,UAAU,KAAK,OAAO,MAAM;AAAA,EAClC;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,MACV,UAAU;AAAA,MACV,WAAW;AAAA,MACX,SAAS;AAAA;EAEZ;AAAA,EACC,QAAQ;AACN,YAAQ;AAAA,MACV,OAAO;AAAA,MACP,MAAM;AAAA,QACJ,EAAE,MAAM,eAAe,SAAS,mBAAmB;AAAA,MACpD;AAAA,KACE;AAAA,EACH;AACJ;;;AA/EO,QAAA,OAAAC,eAAAC,WAAA,EAAA,IAAG,gBAAY,MAAA,CAAA,+IAAA;;;MAWO,MAAS,WAAA;;;;;MAGT,MAAO,SAAA;iDACb,MAAO,OAAA,SAAA;AAAA;;;iFAGqC,MAAQ,QAAA,yFAIhD,MAAQ,QAAA;;;;;;;;;"}