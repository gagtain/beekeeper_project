{"version":3,"file":"orders-86a56df6.js","sources":["../../../../additional_func/getListOrder.js","../../../../components/AddtionalComp/Dialog.vue","../../../../additional_func/addRatingProduct.js","../../../../components/Tovar/RatingChoise.vue","../../../../pages/orders.vue"],"sourcesContent":["import axios from \"axios\";\nimport { api_root } from '@/main'\n\nexport default async function getListOrder(){\n    try {\n        var response = await axios({url: `${api_root}api/v0.1/beekeeper_web_api/order/list`,\n        method: \"get\",\n        headers:{\n            \"Authorization\": `Bearer ${useCookie('assess').value}`\n\n        },\n      })\n      return response\n      } catch (error) {\n        return error.response\n      }\n    }","<template>\n    <dialog id=\"dialog\" class=\"absolute auto\" style=\"pointer-events: auto;\">\n        <slot></slot>\n        <button onclick=\"window.dialog.close();\" aria-label=\"close\" class=\"x\">\n          ❌\n        </button>\n      </dialog>\n</template>\n<style lang=\"scss\" src=\"~/assets/css/interactive/checkbox.scss\" scoped></style>\n\n<script>\n\nexport default{\n    el: '#dialog'\n}\n</script>","import axios from \"axios\";\nimport { api_root } from '@/main'\n\nexport default async function addRatingProduct(product_id, rating){\n    try {\n        var response = await axios({url: `${api_root}api/v0.1/beekeeper_web_api/product/${product_id}/rating/create`,\n        method: \"post\",\n        headers:{\n            \"Authorization\": `Bearer ${useCookie('assess').value}`\n\n        },\n        data:{\n            rating\n        }\n      })\n      return response\n      } catch (error) {\n        return error.response\n      }\n    }","<template>\n                    <div id=\"rating-area\" class=\"rating-area w-sto\">\n\n<span @click=\"submits(number)\" v-for=\"number in [5,4,3,2,1]\" :key=\"number\" for=\"star-1\" :title=\"'Оценка ' + number\"></span>\n\n\n</div>\n</template>\n<style scoped>\n.rating-area {\n\n\nmargin: 0 auto;\n\n}\n\n.rating-area:not(:checked) > input {\n\ndisplay: none;\n\n}\n\n.rating-area:not(:checked) > span {\n\nfloat: right;\n\nwidth: 60px;\n\npadding: 0;\n\ncursor: pointer;\n\nfont-size: 54px;\n\nline-height: 54px;\n\ncolor: lightgrey;\n\ntext-shadow: 1px 1px #bbb;\n\n}\n\n.rating-area:not(:checked) > span:before {\n\ncontent: '★';\n\n}\n\n.rating-area > input:checked ~ span {\n\ncolor: gold;\n\ntext-shadow: 1px 1px #c60;\n\n}\n\n.rating-area:not(:checked) > span:hover,\n\n.rating-area:not(:checked) > span:hover ~ span {\n\ncolor: gold;\n\n}\n\n.rating-area > input:checked + span:hover,\n\n.rating-area > input:checked + span:hover ~ span,\n\n.rating-area > input:checked ~ span:hover,\n\n.rating-area > input:checked ~ span:hover ~ span,\n\n.rating-area > span:hover ~ input:checked ~ span {\n\ncolor: gold;\n\ntext-shadow: 1px 1px goldenrod;\n\n}\n\n.rate-area > span:active {\n\nposition: relative;\n\n}\n\n</style>\n<script>\nimport addRatingProduct from '~/additional_func/addRatingProduct'\nexport default{\n    el:'#rating-area',\n    props:['product_id'],\n    methods:{\n        async submits(rating){\n            let response_rating_create = await addRatingProduct(this.product_id, rating)\n            if (response_rating_create.status == 400){\n                this.$emit('submit', 400)\n            }else{\n\n                this.$emit('submit', 201)\n            }\n        }\n    }\n}\n\n</script>","<template>\n  <div class=\"sot-ob\">\n    <div class=\"wrapper flex\">\n        <DialogWindow>\n            <OrderProductList v-if=\"rating_list\" :orderList=\"rating_list_obj\">\n                <template v-slot:default=\"slotProps\">\n                    <button @click=\"select_rating_product(slotProps.orderItem.productItem.product.id)\" style=\"background: rgb(76, 175, 80); cursor: pointer; width: 100%; border: medium none; border-radius: 6px;font-size: 16px;padding: 2%;margin-top: 1%;\" >\n                              Выбрать\n                            </button>\n                </template>\n\n        \n        \n        </OrderProductList>\n        <div  v-else>\n        <div   class=\"flex\">\n\n            <RatingChoise :product_id=\"select_rating_product_id\" v-on:submit=\"RatingSubmit($event)\"></RatingChoise>\n        </div>\n            <p class=\"VAG\" align=\"center\">Ваш отзыв</p>\n        </div>\n            \n        \n        </DialogWindow>\n      <div class=\"user_card flex auto\">\n        <div class=\"interactiv user_card_div auto\" id=\"orders_main\">\n          <div class=\"kor w-sto relative\">\n    <p class=\"small-big VAG\">Заказы</p>\n    <div class=\"w-sto h_sto\">\n        <div v-if=\"!list_order[0].loading\" class=\"product_order_list \">\n                <div v-for=\"order in list_order\" :key=\"order.id\" class=\"order m-2\">\n                    <div class=\"flex w-sto jus-sp\">\n                    <p align=\"left\">Заказ номер {{ order.id }}</p>\n                        <div class=\"select_size\" >\n                            <button @click=\"ratingDialog(order.product_list_transaction)\" style=\"background: rgb(76, 175, 80); cursor: pointer; width: 100%; border: medium none; border-radius: 6px;font-size: 16px;padding: 2%;margin-top: 1%;\" >\n                              Оставить отзыв\n                            </button>\n                          </div>\n                    </div>\n\n                    <div class=\"w-sto h_sto flex jus-sp\">\n                        <div class=\"product_order m-2\">\n                \n                            <order-product-list :orderList=\"order.product_list_transaction\"></order-product-list>\n\n              </div><div class=\"order_description\">\n                        <div class=\"flex w-sto m-2\">\n                            <div class=\"w-50 \">\n\n                                <p>Когда</p>\n                            </div>\n                            <div class=\"w-50\">\n\n                                <p>{{ getDateFormat(new Date(order.datetime))  }}</p>\n                            </div>\n                        </div>\n                        <div class=\"flex w-sto m-2\">\n                            <div class=\"w-50 \">\n\n                                <p>Куда</p>\n                            </div>\n                            <div class=\"w-50\">\n\n                                <p>{{ order.order_address }} {{ order.order_index }}</p>\n                            </div>\n                        </div>\n                        <div class=\"flex w-sto m-2\">\n                            <div class=\"w-50 \">\n\n                                <p>Способ оплаты</p>\n                            </div>\n                            <div class=\"w-50\">\n\n                                <p>Онлайн {{ order.amount }}</p>\n                            </div>\n                        </div>\n                        <div class=\"flex w-sto m-2\">\n                            <div class=\"w-50 \">\n\n                                <p>Покупатель</p>\n                            </div>\n                            <div class=\"w-50\">\n\n                                <p>{{ order.user.FIO }} {{ order.user.email }}</p>\n                            </div>\n                        </div>\n                        <div class=\"flex w-sto m-2\">\n                            <div class=\"w-50 \">\n\n                                <p>Получатель</p>\n                            </div>\n                            <div class=\"w-50\">\n\n                                <p>{{ order.user.FIO }} {{ order.user.email }}</p>\n                            </div>\n                        </div>\n                        <div class=\"flex w-sto m-2\">\n                            <div class=\"w-50 \">\n\n                                <p>Стоимости доставки</p>\n                            </div>\n                            <div class=\"w-50\">\n\n                                <p>* в разработке *</p>\n                            </div>\n                        </div>\n              </div>\n                    </div>\n                    \n                    \n                </div>\n            </div>\n            <div v-else-if=\"list_order[0].no_order\" class=\"w-sto h_sto flex auto\">\n                <div class=\"auto\">\n                    <p style=\"font-size: 28px;\" class=\"VAG\">Список заказов пуст :(</p>\n                    <div class=\"select_size\" >\n                      <router-link to=\"/basket\">\n                            <button style=\"background: rgb(76, 175, 80); cursor: pointer; width: 100%; border: medium none; border-radius: 6px;font-size: 26px;padding: 2%;margin-top: 1%;\" >\n                              Перейти в корзину\n                            </button>\n                          </router-link>\n                          </div></div>\n                </div>\n                \n            <LoadingComp v-else></LoadingComp>\n    </div>\n            \n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"css\" src=\"../assets/css/account.css\" scoped></style>\n<style scoped>\n.kor {\n  min-height: 50vh;\n}\n.name_order_product {\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  line-height: 16px;\n  overflow: hidden;\n}\n.order_description, .product_order{\n    width: 40%;\n}\n.order{\n    width: 60%;\n    margin-inline: auto;  \n    border: 2px solid gray;\n  padding: 2%;\n}\n.img_order_product_div{\n    width: 80px;\n}\n.img_order_product{\n    width: 100%;\n    aspect-ratio: 1/1;\n}\n.product_order_info{\n    display: flex;\n}\n.info_order_product_div{\n    padding: 2% 0;\n    text-align: left;\n}\n.order_description{\n    text-align: left;\n}\n@media (max-width: 1000px) {\n    .order{\n        display: block;\n    }\n    .order_description, .product_order{\n        width: 100%;\n    }\n}\n@media (max-width: 500px) {\n    .order{\n        width: 100%;\n    }\n    \n}\n</style>\n<script>\nimport getListOrder from '~/additional_func/getListOrder';\nimport LoadingComp from '../components/AddtionalComp/LoadingComp.vue';\nimport OrderProductList from '~/components/AddtionalComp/OrderProductList.vue';\nimport DialogWindow from '../components/AddtionalComp/Dialog.vue';\nimport RatingChoise from '~/components/Tovar/RatingChoise.vue';\nexport default {\n  components: { LoadingComp, OrderProductList, DialogWindow, RatingChoise },\n  el: \"orders_main\",\n  name: \"BasketBase\",\n  data(){\n    return{\n        list_order:[\n            {loading: true, no_order: false}, // свойство для проверки загрузки \n            {\n                id: null,\n                amount: null,\n                user:{\n                    FIO: null,\n                    email: null,\n                },\n                product_list_transaction:[{\n                    id: null,\n                    productItem:{\n                        id: null,\n                        product:{\n                            name: null,\n                        description: null,\n                        image: null,\n                        price_currency: null,\n                        price: null,\n                        },\n                        weight:{\n                        id: null,\n                        weight: null,\n                    },\n                    type_packaging:{\n                        id: null,\n                        name: null,\n                    },\n                        \n                        \n\n                    },\n                    \n                    count: null\n                }],\n                datetime: null,\n                order_address: null,\n                order_index: null\n            }\n        ],\n        rating_list: true,\n        select_rating_product_id: null,\n        rating_list_obj: []\n    }\n  },\n  async mounted(){\n    let response_list_order = await getListOrder()\n    if (response_list_order.status != 404){\n        this.list_order = response_list_order.data\n    }else{\n        this.list_order[0].no_order = true\n    }\n  },\n  methods:{\n    select_rating_product(id){\n        this.select_rating_product_id = id,\n        this.rating_list = false\n    },\n    RatingSubmit(status){\n        console.log(status)\n        if (status == 201){\n\n            this.rating_list = true\n        }else{\n            this.rating_list = true\n            alert('Вы уже оставляли отзыв')\n        }\n    },\n    getDateFormat(date){\n        return `${date.getDay()}/${date.getMonth()}/${date.getFullYear()}`\n    },\n    ratingDialog(rating_list_obj){\n        this.rating_list_obj = rating_list_obj\n        window.dialog.showModal();\n    }\n  }\n};\n</script>\n"],"names":["_sfc_main","_ssrRenderList","_ssrRenderAttr","_ssrRenderAttrs","_mergeProps","_push","_parent","_ssrRenderComponent","_scopeId","_createVNode","_createBlock","_withCtx","_ssrInterpolate"],"mappings":"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"}