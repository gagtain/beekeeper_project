{"version":3,"file":"register-a702af9b.js","sources":["../../../../additional_func/register.js","../../../../pages/register.vue"],"sourcesContent":["import axios from \"axios\";\r\nimport { api_root } from '@/main'\r\n\r\n\r\nexport default async function register(data){\r\n    try {\r\n        var response = await axios({url: `${api_root}api/v0.1/user/register`,\r\n        method: \"post\",\r\n        data: data,\r\n      })\r\n      return response\r\n      } catch (error) {\r\n        return error.response\r\n      }\r\n    }","<template>\r\n  <div class=\"sot-ob\">\r\n    <div class=\"wrapper flex\">\r\n      <div class=\"login-page flex\" id=\"registry\">\r\n        \r\n          <AuthImageForm></AuthImageForm>\r\n        <div class=\"form\">\r\n          <p class=\"small login-p\">Создать аккаунт</p>\r\n          <div class=\"flex h_sto\">\r\n            <form class=\"register-form auto\" id=\"form\">\r\n              <div class=\"error_list\">\r\n                <div v-for=\"element in v$.username.value.$errors\" :key=\"element.$uid\">\r\n                    {{element.$message}}\r\n                </div>\r\n                </div>\r\n              <input\r\n                type=\"text\"\r\n                :placeholder=\"state.username.label\"\r\n                :name=\"state.username.name\"\r\n                v-model=\"v$.username.value.$model\"\r\n\r\n              />\r\n              <div class=\"error_list\">\r\n                <div v-for=\"element in v$.FIO.value.$errors\" :key=\"element.$uid\">\r\n                    {{element.$message}}\r\n                </div>\r\n                </div>\r\n              <input type=\"text\" :placeholder=\"state.FIO.label\" :name=\"state.FIO.name\"\r\n                v-model=\"v$.FIO.value.$model\" />\r\n              <div class=\"error_list\">\r\n                <div v-for=\"element in v$.email.value.$errors\" :key=\"element.$uid\">\r\n                    {{element.$message}}\r\n                </div>\r\n                </div>\r\n              <input type=\"text\" :placeholder=\"state.email.label\" :name=\"state.email.name\"\r\n                v-model=\"v$.email.value.$model\" />\r\n              \r\n              <div class=\"error_list\">\r\n                <div v-for=\"element in v$.password.value.$errors\" :key=\"element.$uid\">\r\n                    {{element.$message}}\r\n                </div>\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                :placeholder=\"state.password.label\"\r\n                :name=\"state.password.name\"\r\n                v-model=\"v$.password.value.$model\"\r\n              />\r\n              <div class=\"error_list flex jus-sp-ar\">\r\n                <div v-for=\"element in v$.password2.value.$errors\" :key=\"element.$uid\">\r\n                    {{element.$message}}\r\n                </div>\r\n                </div>\r\n              <input\r\n                type=\"text\"\r\n                :placeholder=\"state.password2.label\"\r\n                :name=\"state.password2.name\"\r\n                v-model=\"v$.password2.value.$model\"\r\n              />\r\n              <button @click=\"refisterSubmit($event)\">create</button>\r\n              <p class=\"message\">Already registered? <a href=\"#\">Sign In</a></p>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" src=\"~/assets/css/login.scss\" scoped></style>\r\n\r\n<script>\r\nimport { useVuelidate } from \"@vuelidate/core\";\r\nimport { helpers, required, minLength, sameAs, email } from \"@vuelidate/validators\";\r\nimport redirect from '~/additional_func/redirect'\r\nimport register from '~/additional_func/register'\r\nexport default {\r\n  el: \"#registry\",\r\n  data() {\r\n    return {\r\n      width: 0,\r\n      login_img_active: false\r\n    };\r\n  },\r\n  setup(){\r\n    const state = reactive({\r\n      username: {\r\n        label: \"Логин\",\r\n        name: \"username\",\r\n        value: \"\",\r\n      },\r\n      FIO: {\r\n        label: \"ФИО\",\r\n        name: \"FIO\",\r\n        value: \"\",\r\n      },\r\n      email: {\r\n        label: \"почта\",\r\n        name: \"email\",\r\n        value: \"\",\r\n      },\r\n      password: {\r\n        label: \"Пароль\",\r\n        name: \"password\",\r\n        value: \"\",\r\n      },\r\n      password2: {\r\n        label: \"Подтверждение пароля\",\r\n        name: \"password2\",\r\n        value: \"\",\r\n      },\r\n    })\r\n    const rules = {\r\n      username: {\r\n        value: {\r\n            required: helpers.withMessage('Требуется', required)\r\n        },\r\n      },\r\n      FIO: {\r\n        value: {\r\n            required: helpers.withMessage('Требуется', required)\r\n        },\r\n      },\r\n      email: {\r\n        value: {\r\n            required: helpers.withMessage('Требуется', required),\r\n            email: helpers.withMessage('Неверная почта', email)\r\n        },\r\n      },\r\n      password: {\r\n        value: {\r\n            minLength: helpers.withMessage('Длинна не менее 8-ми символов', minLength(8)),\r\n            required: helpers.withMessage('Требуется', required)\r\n        },\r\n      },\r\n      password2: {\r\n        value: {\r\n            minLength: helpers.withMessage('Длинна не менее 8-ми символов', minLength(8)),\r\n            required: helpers.withMessage('Требуется', required),\r\n            sameAsPassword: helpers.withMessage('Пароли не совпадают', sameAs(computed(()=> state.password.value)))\r\n        },\r\n      },\r\n    }\r\n    const v$ = useVuelidate(rules, state)\r\n\r\n    return { state, v$ }\r\n  },\r\n  mounted(){\r\n    this.updateWidth()\r\n    window.addEventListener('resize', this.updateWidth);\r\n  },\r\n  methods:{\r\n    async refisterSubmit(event){\r\n        this.v$.$touch()\r\n        event.preventDefault();\r\n        if (!this.v$.$error){\r\n            let response = await register(new FormData(document.getElementById('form')))\r\n            if (response.status == 201){\r\n                console.log('success')\r\n                redirect(this,{\r\n            path: '/profile'\r\n          })\r\n            }else if (response.status == 400){\r\n                console.log('error')\r\n            }else if (response.status == 404){\r\n                alert('сайт на проверке, подождите 5 минут')\r\n            }\r\n}\r\n        return false;\r\n    },\r\n    updateWidth(){\r\n\r\n    this.width = window.innerWidth;\r\n    }\r\n  },\r\n\r\n};\r\n</script>\r\n"],"names":["register","_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate","_ssrRenderAttr"],"mappings":"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"}