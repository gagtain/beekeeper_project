import{X as L,Y as O,Z as C,$ as W,a0 as N,a1 as M,a2 as V,a3 as j,a4 as U,N as y,v as D,x as P,b as H,y as G,G as J,a as x,o as f,e as p,h as w,F as b,r as z,c as X,f as u,t as S,E as A,l as Y,m as k,p as B,k as T,B as $,q as Z,z as Q,s as K}from"./entry.e0c8763d.js";import{A as ee,F as te}from"./FavoriteComp.bcdf6576.js";async function ie(e,t){return await se(t).catch(s=>(console.error("Failed to get image meta for "+t,s+""),{width:0,height:0,ratio:0}))}async function se(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,i)=>{const s=new Image;s.onload=()=>{const o={width:s.width,height:s.height,ratio:s.width/s.height};t(o)},s.onerror=o=>i(o),s.src=e})}function E(e){return t=>t?e[t]||t:e.missingValue}function oe({formatter:e,keyMap:t,joinWith:i="/",valueMap:s}={}){e||(e=(n,r)=>`${n}=${r}`),t&&typeof t!="function"&&(t=E(t));const o=s||{};return Object.keys(o).forEach(n=>{typeof o[n]!="function"&&(o[n]=E(o[n]))}),(n={})=>Object.entries(n).filter(([c,l])=>typeof l<"u").map(([c,l])=>{const _=o[c];return typeof _=="function"&&(l=_(n[c])),c=typeof t=="function"?t(c):c,e(c,l)}).join(i)}function v(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return parseInt(e,10)}function re(e){const t={options:e},i=(o,n={})=>q(t,o,n),s=(o,n={},r={})=>i(o,{...r,modifiers:N(n,r.modifiers||{})}).url;for(const o in e.presets)s[o]=(n,r,c)=>s(n,r,{...e.presets[o],...c});return s.options=e,s.getImage=i,s.getMeta=(o,n)=>ne(t,o,n),s.getSizes=(o,n)=>le(t,o,n),t.$img=s,s}async function ne(e,t,i){const s=q(e,t,{...i});return typeof s.getMeta=="function"?await s.getMeta():await ie(e,s.url)}function q(e,t,i){var _,m;if(typeof t!="string"||t==="")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(t.startsWith("data:"))return{url:t};const{provider:s,defaults:o}=ae(e,i.provider||e.options.provider),n=ce(e,i.preset);if(t=L(t)?t:O(t),!s.supportsAlias)for(const d in e.options.alias)t.startsWith(d)&&(t=C(e.options.alias[d],t.substr(d.length)));if(s.validateDomains&&L(t)){const d=W(t).host;if(!e.options.domains.find(g=>g===d))return{url:t}}const r=N(i,n,o);r.modifiers={...r.modifiers};const c=r.modifiers.format;(_=r.modifiers)!=null&&_.width&&(r.modifiers.width=v(r.modifiers.width)),(m=r.modifiers)!=null&&m.height&&(r.modifiers.height=v(r.modifiers.height));const l=s.getImage(t,r,e);return l.format=l.format||c||"",l}function ae(e,t){const i=e.options.providers[t];if(!i)throw new Error("Unknown provider: "+t);return i}function ce(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function le(e,t,i){var _,m;const s=v((_=i.modifiers)==null?void 0:_.width),o=v((m=i.modifiers)==null?void 0:m.height),n=s&&o?o/s:0,r=[],c={};if(typeof i.sizes=="string")for(const d of i.sizes.split(/[\s,]+/).filter(g=>g)){const g=d.split(":");g.length===2&&(c[g[0].trim()]=g[1].trim())}else Object.assign(c,i.sizes);for(const d in c){const g=e.options.screens&&e.options.screens[d]||parseInt(d);let a=String(c[d]);const h=a.endsWith("vw");if(!h&&/^\d+$/.test(a)&&(a=a+"px"),!h&&!a.endsWith("px"))continue;let I=parseInt(a);if(!g||!I)continue;h&&(I=Math.round(I/100*g));const F=n?Math.round(I*n):o;r.push({width:I,size:a,screenMaxWidth:g,media:`(max-width: ${g}px)`,src:e.$img(t,{...i.modifiers,width:I,height:F},i)})}r.sort((d,g)=>d.screenMaxWidth-g.screenMaxWidth);const l=r[r.length-1];return l&&(l.media=""),{sizes:r.map(d=>`${d.media?d.media+" ":""}${d.size}`).join(", "),srcset:r.map(d=>`${d.src} ${d.width}w`).join(", "),src:l==null?void 0:l.src}}const de=oe({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,t)=>M(e)+"_"+M(t)}),ue=(e,{modifiers:t={},baseURL:i}={},s)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const o=de(t)||"_";return i||(i=C(s.options.nuxt.baseURL,"/_ipx")),{url:C(i,o,V(e))}},_e=!0,me=!0,ge=Object.freeze(Object.defineProperty({__proto__:null,getImage:ue,supportsAlias:me,validateDomains:_e},Symbol.toStringTag,{value:"Module"})),R={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipx",domains:[],alias:{}};R.providers={ipx:{provider:ge,defaults:void 0}};const fe=()=>{const e=U(),t=j();return t.$img||t._img||(t._img=re({...R,nuxt:{baseURL:e.app.baseURL}}))},pe={src:{type:String,required:!0},format:{type:String,default:void 0},quality:{type:[Number,String],default:void 0},background:{type:String,default:void 0},fit:{type:String,default:void 0},modifiers:{type:Object,default:void 0},preset:{type:String,default:void 0},provider:{type:String,default:void 0},sizes:{type:[Object,String],default:void 0},preload:{type:Boolean,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},alt:{type:String,default:void 0},referrerpolicy:{type:String,default:void 0},usemap:{type:String,default:void 0},longdesc:{type:String,default:void 0},ismap:{type:Boolean,default:void 0},loading:{type:String,default:void 0},crossorigin:{type:[Boolean,String],default:void 0,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,default:void 0,validator:e=>["async","auto","sync"].includes(e)}},he=e=>{const t=y(()=>({provider:e.provider,preset:e.preset})),i=y(()=>({width:v(e.width),height:v(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding})),s=y(()=>({...e.modifiers,width:v(e.width),height:v(e.height),format:e.format,quality:e.quality,background:e.background,fit:e.fit}));return{options:t,attrs:i,modifiers:s}},ve={...pe,placeholder:{type:[Boolean,String,Number,Array],default:void 0}},ye=D({name:"NuxtImg",props:ve,emits:["load","error"],setup:(e,t)=>{const i=fe(),s=he(e),o=P(!1),n=y(()=>i.getSizes(e.src,{...s.options.value,sizes:e.sizes,modifiers:{...s.modifiers.value,width:v(e.width),height:v(e.height)}})),r=y(()=>{const a={...s.attrs.value,"data-nuxt-img":""};return e.sizes&&(a.sizes=n.value.sizes,a.srcset=n.value.srcset),a}),c=y(()=>{let a=e.placeholder;if(a===""&&(a=!0),!a||o.value)return!1;if(typeof a=="string")return a;const h=Array.isArray(a)?a:typeof a=="number"?[a,a]:[10,10];return i(e.src,{...s.modifiers.value,width:h[0],height:h[1],quality:h[2]||50},s.options.value)}),l=y(()=>e.sizes?n.value.src:i(e.src,s.modifiers.value,s.options.value)),_=y(()=>c.value?c.value:l.value);if(e.preload){const a=Object.values(n.value).every(h=>h);H({link:[{rel:"preload",as:"image",...a?{href:n.value.src,imagesizes:n.value.sizes,imagesrcset:n.value.srcset}:{href:_.value}}]})}const m=P(),g=j().isHydrating;return G(()=>{if(c.value){const a=new Image;a.src=l.value,a.onload=h=>{m.value&&(m.value.src=l.value),o.value=!0,t.emit("load",h)};return}m.value&&(m.value.complete&&g&&(m.value.getAttribute("data-error")?t.emit("error",new Event("error")):t.emit("load",new Event("load"))),m.value.onload=a=>{t.emit("load",a)},m.value.onerror=a=>{t.emit("error",a)})}),()=>J("img",{ref:m,key:_.value,src:_.value,...r.value,...t.attrs})}});const we={el:"#photo-album",name:"TovarMinImageList",props:["image","ImageProductList"],created(){console.log(this.ImageProductList)},methods:{a(e){e.srcElement.parentElement.parentElement.firstChild.getElementsByTagName("img")[0].src=e.srcElement.src}}},Ie={class:"photo-album flex",id:"photo-album"};function Se(e,t,i,s,o,n){const r=ye;return f(),p("div",Ie,[w(r,{loading:"lazy",onClick:t[0]||(t[0]=c=>n.a(c)),class:"add-img-tovar",src:e.$api_root+i.image},null,8,["src"]),(f(!0),p(b,null,z(i.ImageProductList,(c,l)=>(f(),X(r,{loading:"lazy",onClick:t[1]||(t[1]=_=>n.a(_)),key:l,class:"add-img-tovar",src:e.$api_root+c.photo},null,8,["src"]))),128))])}const $e=x(we,[["render",Se],["__scopeId","data-v-8f5537f0"]]);const xe={el:"#rating",name:"RatingComp",props:["rating"]},be={class:"rating-mini",id:"rating"},ze={class:"normal-small",style:{display:"inline"}};function ke(e,t,i,s,o,n){return f(),p("div",be,[(f(!0),p(b,null,z(Math.round(i.rating),r=>(f(),p("span",{key:r,class:"active"}))),128)),(f(!0),p(b,null,z(5-Math.round(i.rating),r=>(f(),p("span",{key:r}))),128)),u("p",ze,"/"+S(Math.round(i.rating*100)/100),1)])}const Ce=x(xe,[["render",ke]]);const Le={props:["select_productItem","pr"],data(){return{weight_all:!1}},methods:{select_type_weigth(e){let i=this.pr.productItemList.slice().filter(s=>s.weight.id==e)[0];this.$emit("select_product",i),console.log(this.select_productItem)},get_weight_type_list(){let e=[];return this.pr.productItemList.forEach(t=>{e.push(t.weight)}),e}}},Me=e=>(B("data-v-604fa88a"),e=e(),T(),e),Pe={key:0,class:"variant"},Ee=Me(()=>u("h3",null,"Размер",-1)),Ne={class:"flex"},je=["onClick"],Ae={class:"h_sto"};function Be(e,t,i,s,o,n){return i.select_productItem.weight?(f(),p("div",Pe,[Ee,u("div",Ne,[u("ul",{class:"variant-ul",style:A(o.weight_all?"display: block":"display: flex")},[(f(!0),p(b,null,z(n.get_weight_type_list(),(r,c)=>(f(),p("li",{onClick:l=>n.select_type_weigth(r.id),class:Y([i.select_productItem.weight.id==r.id?"active":"","photo-album-li"]),key:c},[u("div",Ae,[u("p",null,S(r.weight)+" гр",1)])],10,je))),128)),n.get_weight_type_list().length>2&&!o.weight_all?(f(),p("li",{key:0,onClick:t[0]||(t[0]=r=>o.weight_all=!o.weight_all)}," раскрыть ")):k("",!0),o.weight_all?(f(),p("li",{key:1,onClick:t[1]||(t[1]=r=>o.weight_all=!o.weight_all)}," скрыть ")):k("",!0)],4)])])):k("",!0)}const Te=x(Le,[["render",Be],["__scopeId","data-v-604fa88a"]]),qe={data(){return{select_productItem:null}},methods:{select_product(e){this.select_productItem=e}}};function Re(e,t,i,s,o,n){return null}const Fe=x(qe,[["render",Re]]);const Oe={el:"#product_catalog",name:"CatalogProduct",props:["pr"],components:{TovarMinImageList:$e,AddBasket:ee,FavoriteComp:te,RatingComp:Ce,SelectVariantMenu:Te},mixins:[Fe],data(){return{type_weigth_id:null}},created(){this.select_productItem=this.pr.productItemList[0]}},We=e=>(B("data-v-f749c382"),e=e(),T(),e),Ve={class:"product",id:"product_catalog"},Ue={class:"product__photo"},De={class:"photo-container"},He={class:"photo-main"},Ge=We(()=>u("div",{class:"controls"},null,-1)),Je=["src"],Xe={class:"product__info"},Ye={class:"title"},Ze={class:"small-big product__name"},Qe={class:"very-small product__code"},Ke={class:"price"},et={class:"product__price small-big"},tt={class:"product__price small"};function it(e,t,i,s,o,n){const r=$("TovarMinImageList"),c=K,l=$("rating-comp"),_=$("select-variant-menu"),m=$("AddBasket"),d=$("FavoriteComp");return f(),p("section",Ve,[u("div",Ue,[u("div",De,[u("div",He,[Ge,u("img",{src:e.$api_root+i.pr.image,alt:"green apple slice"},null,8,Je)]),w(r,{image:i.pr.image,ImageProductList:i.pr.ImageProductList},null,8,["image","ImageProductList"])])]),u("div",Xe,[u("div",Ye,[w(c,{"no-prefetch":"",to:`/tovar/${i.pr.id}`},{default:Z(()=>[u("p",Ze,S(i.pr.name),1)]),_:1},8,["to"]),u("span",Qe,"COD: "+S(i.pr.id),1)]),u("div",Ke,[u("span",et,[Q(S(e.select_productItem.price)+" ",1),u("span",tt,S(i.pr.price_currency),1)])]),w(l,{rating:i.pr.rating},null,8,["rating"]),w(_,{select_productItem:e.select_productItem,pr:i.pr,onSelect_product:e.select_product},null,8,["select_productItem","pr","onSelect_product"]),u("div",{style:A(e.select_productItem.weight?"margin-top: 8px":"margin-top: 56px"),class:"flex jus-sp"},[w(m,{id:e.select_productItem.id},null,8,["id"]),w(d,{id:e.select_productItem.id},null,8,["id"])],4)])])}const rt=x(Oe,[["render",it],["__scopeId","data-v-f749c382"]]);export{rt as C,Ce as R,Te as S,$e as T,ye as _};
