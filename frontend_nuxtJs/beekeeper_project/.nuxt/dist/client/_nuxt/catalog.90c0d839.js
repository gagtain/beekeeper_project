import{C as $}from"./CatalogProduct.7bd81776.js";import{i as m,j as y,k as C,a as v,o as r,b as l,f as s,F as k,l as A,w as S,t as x,p as b,m as F,q as h,r as f,h as d,s as I,c as w,v as N,x as O}from"./entry.89490881.js";import{L as R}from"./LoadingComp.18bbea0d.js";import"./RatingComp.db3dedf5.js";import"./removeFavorite.75177b76.js";async function M(t){try{var e=await m({url:`${y}api/v0.1/beekeeper_web_api/product?size=${t}`,method:"get",headers:{Authorization:`Bearer ${C("assess").value}`}});return e}catch(o){return o.response}}const E={el:"#filter",name:"FilterCatalog",data(){return{filter_catalog:[],filter_class_name:[],filter_packaging_name:[],cat_list:[]}},props:["catalog_list","category_list"],methods:{addClassFilter(t){var o;t=(o=t==null?void 0:t.srcElement)!=null&&o.children[0]?t.srcElement:t.target.parentNode,this.addClassActive(t);let e=this.filter_class_name.indexOf(t.children[0].innerHTML);e>=0?(this.filter_class_name.splice(e,1),console.log(this.filter_class_name),this.c()):(this.filter_class_name.push(t.children[0].innerHTML),this.c())},c(){let t=this.a();this.$store.REFACTOR_CATALOG_LIST(t)},a(){let t=this.catalog_list.slice();return this.filter_class_name.forEach(e=>{console.log(e),t=t.filter(o=>o.category.find(_=>_.name==e))}),t},addClassActive(t){console.log(t),t.classList.contains("active")?t.classList.remove("active"):t.classList.add("active")}},setup(){}},z=t=>(b("data-v-104c8686"),t=t(),F(),t),q={id:"filter"},B=z(()=>s("p",{class:"filter-p small"},"Категория",-1)),G={class:"filter-ul"};function U(t,e,o,_,a,i){return r(),l("div",q,[B,s("ul",G,[(r(!0),l(k,null,A(o.category_list,(c,g)=>(r(),l("li",{onClick:e[1]||(e[1]=n=>i.addClassFilter(n)),key:g,class:"filter-li"},[s("p",{onClick:e[0]||(e[0]=S(n=>i.addClassFilter(n),["stop"])),class:"normal-small"},x(c.name),1)]))),128))])])}const P=v(E,[["render",U],["__scopeId","data-v-104c8686"]]);const V={el:"#sorted",name:"SortedCatalog",data(){return{sorted_list:[],sorteredAlf:!1,sorteredMonet:!1,sorteredNew:!1}},props:["catalog_list"],methods:{sorteredAlfFunc(){let t=this.$store.getCatalog_list.sort((e,o)=>e.name.localeCompare(o.name));this.sorteredAlf=!this.sorteredAlf,this.sorteredMonet=!1,this.sorteredNew=!1,this.$store.REFACTOR_CATALOG_LIST(t)},sorteredMoneyFUnc(){let t=this.$store.getCatalog_list.sort((e,o)=>parseFloat(o.price)-parseFloat(e.price));this.sorteredMonet=!this.sorteredMonet,this.sorteredAlf=!1,this.sorteredNew=!1,this.$store.REFACTOR_CATALOG_LIST(t)},sorteredNewFUnc(){let t=this.$store.getCatalog_list.sort((e,o)=>parseFloat(o.id)-parseFloat(e.id));this.sorteredNew=!this.sorteredNew,this.sorteredMonet=!1,this.sorteredAlf=!1,this.$store.REFACTOR_CATALOG_LIST(t)}},setup(){}},j={class:"sorted-product flex jus-sp",id:"sorted"};function H(t,e,o,_,a,i){return r(),l("div",j,[s("p",{onClick:e[0]||(e[0]=c=>i.sorteredAlfFunc()),class:h([a.sorteredAlf?"act_sorted-p":"","sorted-p small"])}," По имени ",2),s("p",{onClick:e[1]||(e[1]=c=>i.sorteredMoneyFUnc()),class:h([a.sorteredMonet?"act_sorted-p":"","sorted-p small"])}," По цене ",2),s("p",{onClick:e[2]||(e[2]=c=>i.sorteredNewFUnc()),class:h([a.sorteredNew?"act_sorted-p":"","sorted-p small"])}," Новое ",2)])}const J=v(V,[["render",H],["__scopeId","data-v-5ca13951"]]);async function D(){try{var t=await m({url:`${y}api/v0.1/beekeeper_web_api/category`,method:"get",headers:{Authorization:`Bearer ${C("assess").value}`}});return t}catch(e){return e.response}}async function K(t){try{var e=await m({url:`${y}api/v0.1/beekeeper_web_api/product/search?${t}`,method:"get",headers:{Authorization:`Bearer ${C("assess").value}`}});return e}catch(o){return o.response}}const Q=""+new URL("filter.b252e476.png",import.meta.url).href;const W={el:"#catalog",name:"CatalogItem",components:{FilterCatalog:P,SortedCatalog:J,CatalogProduct:$,LoadingComp:R},data(){return{catalog_list:[{id:0,name:"",image:"",price:"",price_currency:"",description:"",category:[{name:""}]}],filter_teleport:!1,category_list:[],type_packaging:[],CATALOG_LIST_STATE:this.$store.getCatalog_list,filters:!1,catalog_loads:!1}},async mounted(){this.restartCatalog(),this.filterReg()},methods:{async clear_filter(){await this.$router.replace({query:null}),setInterval(()=>{var t;(t=this.$route.query)!=null&&t.filter||this.$router.go()},100)},async restartCatalog(){var e;this.catalog_loads=!1;let t=null;(e=this.$route.query)!=null&&e.filter?(t=await K(`name=${JSON.parse(this.$route.query.filter).name}`),this.filters=!0):t=await M(50),console.log(t,342),this.catalog_list=t.data,this.catalog_list_sorted=this.catalog_list.slice(),this.$store.REFACTOR_CATALOG_LIST(this.catalog_list),this.catalog_loads=!0},async filterReg(){let t=await D();this.category_list=t.data}},setup(){},watch:{"$route.query":async function(){this.restartCatalog()}}},p=t=>(b("data-v-0c77a394"),t=t(),F(),t),X={id:"catalog"},Y={class:"absolute flex w-sto h_sto",style:{"pointer-events":"none"}},Z={id:"dialog",class:"absolute auto",style:{"pointer-events":"auto"}},tt=p(()=>s("button",{class:"btn w-sto btn-green",onclick:"window.dialog.close();"},"Показать",-1)),et=p(()=>s("button",{onclick:"window.dialog.close();","aria-label":"close",class:"x"}," ❌ ",-1)),st={class:"sot-ob"},ot={class:"wrapper-product w-sto flex"},at={class:"interactiv auto back"},rt={key:0,style:{"margin-left":"5%"},class:"small"},lt={class:"flex w-sto product_div"},it={class:"block filter_div"},ct={class:"filter-product",id:"filter_desk"},nt={class:"product_osnov relative"},_t={class:"sorted_div flex jus-sp"},dt=p(()=>s("div",{class:"mob_filter flex"},[s("img",{onclick:"window.dialog.showModal();",class:"open_filter_mob auto",src:Q,alt:""})],-1)),pt={key:0,class:"w-sto product-list flex"},gt={key:2,style:{width:"50%",margin:"auto","margin-top":"10%"}},ut=p(()=>s("div",{style:{"text-align":"center"},class:"flex w-sto"},[s("p",{style:{"font-size":"28px"},class:"VAG auto"},"Товаров с выбранными параметрами нету :(")],-1)),ht={class:"select_size"};function ft(t,e,o,_,a,i){const c=f("FilterCatalog"),g=f("SortedCatalog"),n=$,L=f("LoadingComp"),T=O;return r(),l("div",X,[s("div",Y,[s("dialog",Z,[d(c,{category_list:a.category_list,catalog_list:a.catalog_list,onUpdateClassFiler:t.filterClassReg},null,8,["category_list","catalog_list","onUpdateClassFiler"]),tt,et])]),s("div",st,[s("div",ot,[s("div",at,[a.filters?(r(),l("p",rt,x(JSON.parse(this.$route.query.filter).name),1)):I("",!0),s("div",lt,[s("div",it,[s("div",ct,[d(c,{category_list:a.category_list,catalog_list:a.catalog_list},null,8,["category_list","catalog_list"])])]),s("div",nt,[s("div",_t,[d(g,{catalog_list:a.catalog_list},null,8,["catalog_list"]),dt]),t.$store.getCatalog_list.length?(r(),l("div",pt,[(r(!0),l(k,null,A(t.$store.getCatalog_list,u=>(r(),w(n,{key:u.id,pr:u},null,8,["pr"]))),128))])):a.catalog_loads?(r(),l("div",gt,[ut,s("div",ht,[d(T,{to:"/catalog"},{default:N(()=>[s("button",{onClick:e[0]||(e[0]=u=>i.clear_filter()),style:{background:"rgb(255, 188, 65)",cursor:"pointer",width:"100%",border:"medium none","border-radius":"6px","font-size":"26px",padding:"2%","margin-top":"1%"}}," Сбросить настройки ")]),_:1})])])):(r(),w(L,{key:1}))])])])])])])}const $t=v(W,[["render",ft],["__scopeId","data-v-0c77a394"]]);export{$t as default};
